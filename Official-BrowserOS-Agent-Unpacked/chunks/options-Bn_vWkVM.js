import{c as Ee,j as t,r as d,a8 as cs,R as On,h as ye,a9 as Fn,f as mr,C as Vn,k as fe,aa as Un,ab as Bn,ac as ds,P as Hn,O as Kn,ad as zn,a as K,ae as us,af as fs,ag as ms,w as ft,E as Z,ah as Oe,d as $n,e as Zt,u as hr,i as ge,v as Fe,m as Wn,x as hs,y as qn,n as Gn,p as Yn,o as Zn,F as Xn,D as Jn,N as Qn,t as O,ai as eo,aj as to,ak as ro,al as so,am as pr,an as xe,ao as Vr,ap as no,G as Tt,a4 as Rt,a5 as Dt,a6 as Mt,a7 as Lt,aq as oo,ar as gr,T as We,as as ps,S as ao,at as io,X as gs,Q as lo,au as co,av as uo,aw as ct,V as fo,W as mo,Y as Me,Z as ho,_ as po,$ as go,a0 as xo,a1 as vo,a2 as yo}from"./product_logo-C96HwpIU.js";import{B as bo,P as xs,V as jo,C as mt,c as Ge,I as he,d as wo,g as vs,e as yt,A as So,f as xr,h as vr,j as yr,u as No,k as Ot,l as Co,m as qe,H as _o,n as Io,R as ys,o as Ao,M as ko,p as Eo,q as Po,r as To}from"./useBrowserOSProviders-BLKu1s2X.js";import{c as bs,u as Ro,R as Do,d as Mo,A as Lo,e as js,C as Oo,a as Fo,L as ws,b as Vo,B as Uo,T as Bo,f as Ho}from"./theme-toggle-DsZTZK7_.js";import{a as br,F as jr,w as Ko,I as zo,u as wr,b as $o,s as Wo,m as qt,g as Ur,U as gt,c as Ss,d as qo}from"./index-DQX6aDal.js";import{M as Ns,S as Go}from"./settings-De2ErBO4.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"384410028dc6aac75eb61d6b08dc7127d516d4af"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="132dbba4-6e77-4ba3-a877-2a2cfa732331",e._sentryDebugIdIdentifier="sentry-dbid-132dbba4-6e77-4ba3-a877-2a2cfa732331")})()}catch{}const Yo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zo=Ee("chevron-up",Yo);const Xo=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jo=Ee("earth",Xo);const Qo=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Cs=Ee("external-link",Qo);const ea=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],ta=Ee("menu",ea);const ra=[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]],sa=Ee("plug-zap",ra);const na=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],oa=Ee("rotate-ccw",na);const aa=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],rt=Ee("server",aa);const ia=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sr=Ee("trash-2",ia);const la=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ca=Ee("wrench",la),ze={custom:"custom"};var da=Symbol("radix.slottable");function ua(e){const s=({children:r})=>t.jsx(t.Fragment,{children:r});return s.displayName=`${e}.Slottable`,s.__radixId=da,s}var _s="AlertDialog",[fa]=mr(_s,[cs]),Pe=cs(),Is=e=>{const{__scopeAlertDialog:s,...r}=e,n=Pe(s);return t.jsx(On,{...n,...r,modal:!0})};Is.displayName=_s;var ma="AlertDialogTrigger",ha=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,o=Pe(r);return t.jsx(zn,{...o,...n,ref:s})});ha.displayName=ma;var pa="AlertDialogPortal",As=e=>{const{__scopeAlertDialog:s,...r}=e,n=Pe(s);return t.jsx(Hn,{...n,...r})};As.displayName=pa;var ga="AlertDialogOverlay",ks=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,o=Pe(r);return t.jsx(Kn,{...o,...n,ref:s})});ks.displayName=ga;var tt="AlertDialogContent",[xa,va]=fa(tt),ya=ua("AlertDialogContent"),Es=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,children:n,...o}=e,a=Pe(r),i=d.useRef(null),l=ye(s,i),u=d.useRef(null);return t.jsx(Fn,{contentName:tt,titleName:Ps,docsSlug:"alert-dialog",children:t.jsx(xa,{scope:r,cancelRef:u,children:t.jsxs(Vn,{role:"alertdialog",...a,...o,ref:l,onOpenAutoFocus:fe(o.onOpenAutoFocus,m=>{m.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[t.jsx(ya,{children:n}),t.jsx(ja,{contentRef:i})]})})})});Es.displayName=tt;var Ps="AlertDialogTitle",Ts=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,o=Pe(r);return t.jsx(Un,{...o,...n,ref:s})});Ts.displayName=Ps;var Rs="AlertDialogDescription",Ds=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,o=Pe(r);return t.jsx(Bn,{...o,...n,ref:s})});Ds.displayName=Rs;var ba="AlertDialogAction",Ms=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,o=Pe(r);return t.jsx(ds,{...o,...n,ref:s})});Ms.displayName=ba;var Ls="AlertDialogCancel",Os=d.forwardRef((e,s)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:o}=va(Ls,r),a=Pe(r),i=ye(s,o);return t.jsx(ds,{...a,...n,ref:i})});Os.displayName=Ls;var ja=({contentRef:e})=>{const s=`\`${tt}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${tt}\` by passing a \`${Rs}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${tt}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,e]),null},wa=Is,Sa=As,Na=ks,Ca=Es,_a=Ms,Ia=Os,Aa=Ts,ka=Ds;function bt({...e}){return t.jsx(wa,{"data-slot":"alert-dialog",...e})}function Ea({...e}){return t.jsx(Sa,{"data-slot":"alert-dialog-portal",...e})}function Pa({className:e,...s}){return t.jsx(Na,{"data-slot":"alert-dialog-overlay",className:K("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50 backdrop-blur-[2px] data-[state=closed]:animate-out data-[state=open]:animate-in",e),...s})}function jt({className:e,...s}){return t.jsxs(Ea,{children:[t.jsx(Pa,{}),t.jsx(Ca,{"data-slot":"alert-dialog-content",className:K("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border bg-background p-6 shadow-lg duration-200 data-[state=closed]:animate-out data-[state=open]:animate-in sm:max-w-lg",e),...s})]})}function wt({className:e,...s}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:K("flex flex-col gap-2 text-center sm:text-left",e),...s})}function St({className:e,...s}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:K("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function Nt({className:e,...s}){return t.jsx(Aa,{"data-slot":"alert-dialog-title",className:K("font-semibold text-lg",e),...s})}function Ct({className:e,...s}){return t.jsx(ka,{"data-slot":"alert-dialog-description",className:K("text-muted-foreground text-sm",e),...s})}function _t({className:e,...s}){return t.jsx(_a,{className:K(us(),e),...s})}function It({className:e,...s}){return t.jsx(Ia,{className:K(us({variant:"outline"}),e),...s})}async function Fs(e,s){const r=performance.now();try{const o=await(await fetch(`${s}/test-provider`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e.type,model:e.modelId,apiKey:e.apiKey,baseUrl:e.baseUrl,resourceName:e.resourceName,region:e.region,accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,sessionToken:e.sessionToken})})).json();return o.responseTime||(o.responseTime=Math.round(performance.now()-r)),o}catch(n){const o=Math.round(performance.now()-r);return n instanceof Error?{success:!1,message:n.message,responseTime:o}:{success:!1,message:"An unexpected error occurred",responseTime:o}}}const Ta=ms("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Vs({className:e,variant:s,asChild:r=!1,...n}){const o=r?fs:"span";return t.jsx(o,{"data-slot":"badge",className:K(Ta({variant:s}),e),...n})}const Ra=({provider:e,isSelected:s,isBuiltIn:r,onSelect:n,onTest:o,onEdit:a,onDelete:i,isTesting:l=!1})=>{const u=`provider-${e.id}`;return t.jsxs("label",{htmlFor:u,className:K("group flex w-full cursor-pointer items-center gap-4 rounded-xl border p-4 text-left transition-all",s?"border-[var(--accent-blue)] bg-[var(--accent-blue)]/5 shadow-md":"border-border bg-card hover:border-[var(--accent-blue)]/50 hover:shadow-sm"),children:[t.jsx("input",{type:"radio",id:u,name:"default-provider",className:"sr-only",checked:s,onChange:()=>n()}),t.jsx("div",{className:K("flex h-5 w-5 shrink-0 items-center justify-center rounded-full border-2 transition-all",s?"border-[var(--accent-blue)] bg-[var(--accent-blue)]":"border-border"),children:s&&t.jsx(ft,{className:"h-3 w-3 text-white"})}),t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-[var(--accent-blue)]/10 text-[var(--accent-blue)]",children:r?t.jsx(bo,{size:24}):t.jsx(xs,{type:e.type,size:24})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[t.jsx("span",{className:"font-semibold",children:e.name}),s&&t.jsx(Vs,{variant:"secondary",className:"rounded bg-[var(--accent-blue)]/10 text-[var(--accent-blue)]",children:"DEFAULT"})]}),t.jsx("p",{className:"truncate text-muted-foreground text-sm",children:r?"Model hosted on the cloud by BrowserOS, has strict rate limits":`${e.modelId} • ${e.baseUrl}`})]}),!r&&t.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[t.jsxs(Z,{variant:"outline",size:"sm",disabled:l,onClick:()=>o?.(),children:[l&&t.jsx(Oe,{className:"mr-1.5 h-4 w-4 animate-spin"}),l?"Testing...":"Test"]}),t.jsx(Z,{variant:"outline",size:"sm",onClick:()=>a?.(),children:"Edit"}),t.jsx(Z,{variant:"ghost",size:"icon-sm",className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive",onClick:()=>i?.(),children:t.jsx(Sr,{className:"h-4 w-4"})})]})]})},Da=({providers:e,selectedProviderId:s,testingProviderId:r,onSelectProvider:n,onTestProvider:o,onEditProvider:a,onDeleteProvider:i})=>t.jsx("div",{className:"space-y-3",children:e.map(l=>{const u=l.id==="browseros";return t.jsx(Ra,{provider:l,isSelected:s===l.id,isBuiltIn:u,isTesting:r===l.id,onSelect:()=>n(l.id),onTest:()=>o(l),onEdit:()=>a(l),onDelete:()=>i(l)},l.id)})});function Br(e,[s,r]){return Math.min(r,Math.max(s,e))}function Ma(e){const s=La(e),r=d.forwardRef((n,o)=>{const{children:a,...i}=n,l=d.Children.toArray(a),u=l.find(Fa);if(u){const m=u.props.children,x=l.map(b=>b===u?d.Children.count(m)>1?d.Children.only(null):d.isValidElement(m)?m.props.children:null:b);return t.jsx(s,{...i,ref:o,children:d.isValidElement(m)?d.cloneElement(m,void 0,x):null})}return t.jsx(s,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function La(e){const s=d.forwardRef((r,n)=>{const{children:o,...a}=r;if(d.isValidElement(o)){const i=Ua(o),l=Va(a,o.props);return o.type!==d.Fragment&&(l.ref=n?$n(n,i):i),d.cloneElement(o,l)}return d.Children.count(o)>1?d.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var Oa=Symbol("radix.slottable");function Fa(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Oa}function Va(e,s){const r={...s};for(const n in s){const o=e[n],a=s[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const u=a(...l);return o(...l),u}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function Ua(e){let s=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ba=[" ","Enter","ArrowUp","ArrowDown"],Ha=[" ","Enter"],Ye="Select",[Ft,Vt,Ka]=Mo(Ye),[st]=mr(Ye,[Ka,bs]),Ut=bs(),[za,Ve]=st(Ye),[$a,Wa]=st(Ye),Us=e=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:u,dir:m,name:x,autoComplete:b,disabled:h,required:k,form:I}=e,v=Ut(s),[C,T]=d.useState(null),[y,p]=d.useState(null),[w,E]=d.useState(!1),V=Ro(m),[U,se]=Zt({prop:n,defaultProp:o??!1,onChange:a,caller:Ye}),[D,J]=Zt({prop:i,defaultProp:l,onChange:u,caller:Ye}),G=d.useRef(null),M=C?I||!!C.closest("form"):!0,[F,B]=d.useState(new Set),W=Array.from(F).map(H=>H.props.value).join(";");return t.jsx(Do,{...v,children:t.jsxs(za,{required:k,scope:s,trigger:C,onTriggerChange:T,valueNode:y,onValueNodeChange:p,valueNodeHasChildren:w,onValueNodeHasChildrenChange:E,contentId:hr(),value:D,onValueChange:J,open:U,onOpenChange:se,dir:V,triggerPointerDownPosRef:G,disabled:h,children:[t.jsx(Ft.Provider,{scope:s,children:t.jsx($a,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(H=>{B(S=>new Set(S).add(H))},[]),onNativeOptionRemove:d.useCallback(H=>{B(S=>{const R=new Set(S);return R.delete(H),R})},[]),children:r})}),M?t.jsxs(cn,{"aria-hidden":!0,required:k,tabIndex:-1,name:x,autoComplete:b,value:D,onChange:H=>J(H.target.value),disabled:h,form:I,children:[D===void 0?t.jsx("option",{value:""}):null,Array.from(F)]},W):null]})})};Us.displayName=Ye;var Bs="SelectTrigger",Hs=d.forwardRef((e,s)=>{const{__scopeSelect:r,disabled:n=!1,...o}=e,a=Ut(r),i=Ve(Bs,r),l=i.disabled||n,u=ye(s,i.onTriggerChange),m=Vt(r),x=d.useRef("touch"),[b,h,k]=un(v=>{const C=m().filter(p=>!p.disabled),T=C.find(p=>p.value===i.value),y=fn(C,v,T);y!==void 0&&i.onValueChange(y.value)}),I=v=>{l||(i.onOpenChange(!0),k()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return t.jsx(Lo,{asChild:!0,...a,children:t.jsx(ge.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":dn(i.value)?"":void 0,...o,ref:u,onClick:fe(o.onClick,v=>{v.currentTarget.focus(),x.current!=="mouse"&&I(v)}),onPointerDown:fe(o.onPointerDown,v=>{x.current=v.pointerType;const C=v.target;C.hasPointerCapture(v.pointerId)&&C.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(I(v),v.preventDefault())}),onKeyDown:fe(o.onKeyDown,v=>{const C=b.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(C&&v.key===" ")&&Ba.includes(v.key)&&(I(),v.preventDefault())})})})});Hs.displayName=Bs;var Ks="SelectValue",zs=d.forwardRef((e,s)=>{const{__scopeSelect:r,className:n,style:o,children:a,placeholder:i="",...l}=e,u=Ve(Ks,r),{onValueNodeHasChildrenChange:m}=u,x=a!==void 0,b=ye(s,u.onValueNodeChange);return Fe(()=>{m(x)},[m,x]),t.jsx(ge.span,{...l,ref:b,style:{pointerEvents:"none"},children:dn(u.value)?t.jsx(t.Fragment,{children:i}):a})});zs.displayName=Ks;var qa="SelectIcon",$s=d.forwardRef((e,s)=>{const{__scopeSelect:r,children:n,...o}=e;return t.jsx(ge.span,{"aria-hidden":!0,...o,ref:s,children:n||"▼"})});$s.displayName=qa;var Ga="SelectPortal",Ws=e=>t.jsx(Wn,{asChild:!0,...e});Ws.displayName=Ga;var Ze="SelectContent",qs=d.forwardRef((e,s)=>{const r=Ve(Ze,e.__scopeSelect),[n,o]=d.useState();if(Fe(()=>{o(new DocumentFragment)},[]),!r.open){const a=n;return a?hs.createPortal(t.jsx(Gs,{scope:e.__scopeSelect,children:t.jsx(Ft.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),a):null}return t.jsx(Ys,{...e,ref:s})});qs.displayName=Ze;var Se=10,[Gs,Ue]=st(Ze),Ya="SelectContentImpl",Za=Ma("SelectContent.RemoveScroll"),Ys=d.forwardRef((e,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:u,align:m,alignOffset:x,arrowPadding:b,collisionBoundary:h,collisionPadding:k,sticky:I,hideWhenDetached:v,avoidCollisions:C,...T}=e,y=Ve(Ze,r),[p,w]=d.useState(null),[E,V]=d.useState(null),U=ye(s,L=>w(L)),[se,D]=d.useState(null),[J,G]=d.useState(null),M=Vt(r),[F,B]=d.useState(!1),W=d.useRef(!1);d.useEffect(()=>{if(p)return Gn(p)},[p]),Yn();const H=d.useCallback(L=>{const[Q,...me]=M().map(te=>te.ref.current),[q]=me.slice(-1),X=document.activeElement;for(const te of L)if(te===X||(te?.scrollIntoView({block:"nearest"}),te===Q&&E&&(E.scrollTop=0),te===q&&E&&(E.scrollTop=E.scrollHeight),te?.focus(),document.activeElement!==X))return},[M,E]),S=d.useCallback(()=>H([se,p]),[H,se,p]);d.useEffect(()=>{F&&S()},[F,S]);const{onOpenChange:R,triggerPointerDownPosRef:ce}=y;d.useEffect(()=>{if(p){let L={x:0,y:0};const Q=q=>{L={x:Math.abs(Math.round(q.pageX)-(ce.current?.x??0)),y:Math.abs(Math.round(q.pageY)-(ce.current?.y??0))}},me=q=>{L.x<=10&&L.y<=10?q.preventDefault():p.contains(q.target)||R(!1),document.removeEventListener("pointermove",Q),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",me,{capture:!0})}}},[p,R,ce]),d.useEffect(()=>{const L=()=>R(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[R]);const[Te,Be]=un(L=>{const Q=M().filter(X=>!X.disabled),me=Q.find(X=>X.ref.current===document.activeElement),q=fn(Q,L,me);q&&setTimeout(()=>q.ref.current.focus())}),nt=d.useCallback((L,Q,me)=>{const q=!W.current&&!me;(y.value!==void 0&&y.value===Q||q)&&(D(L),q&&(W.current=!0))},[y.value]),Xe=d.useCallback(()=>p?.focus(),[p]),Re=d.useCallback((L,Q,me)=>{const q=!W.current&&!me;(y.value!==void 0&&y.value===Q||q)&&G(L)},[y.value]),He=n==="popper"?Xt:Zs,Ke=He===Xt?{side:l,sideOffset:u,align:m,alignOffset:x,arrowPadding:b,collisionBoundary:h,collisionPadding:k,sticky:I,hideWhenDetached:v,avoidCollisions:C}:{};return t.jsx(Gs,{scope:r,content:p,viewport:E,onViewportChange:V,itemRefCallback:nt,selectedItem:se,onItemLeave:Xe,itemTextRefCallback:Re,focusSelectedItem:S,selectedItemText:J,position:n,isPositioned:F,searchRef:Te,children:t.jsx(Zn,{as:Za,allowPinchZoom:!0,children:t.jsx(Xn,{asChild:!0,trapped:y.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:fe(o,L=>{y.trigger?.focus({preventScroll:!0}),L.preventDefault()}),children:t.jsx(Jn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:t.jsx(He,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:L=>L.preventDefault(),...T,...Ke,onPlaced:()=>B(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:fe(T.onKeyDown,L=>{const Q=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!Q&&L.key.length===1&&Be(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let q=M().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(L.key)&&(q=q.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const X=L.target,te=q.indexOf(X);q=q.slice(te+1)}setTimeout(()=>H(q)),L.preventDefault()}})})})})})})});Ys.displayName=Ya;var Xa="SelectItemAlignedPosition",Zs=d.forwardRef((e,s)=>{const{__scopeSelect:r,onPlaced:n,...o}=e,a=Ve(Ze,r),i=Ue(Ze,r),[l,u]=d.useState(null),[m,x]=d.useState(null),b=ye(s,U=>x(U)),h=Vt(r),k=d.useRef(!1),I=d.useRef(!0),{viewport:v,selectedItem:C,selectedItemText:T,focusSelectedItem:y}=i,p=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&m&&v&&C&&T){const U=a.trigger.getBoundingClientRect(),se=m.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),J=T.getBoundingClientRect();if(a.dir!=="rtl"){const X=J.left-se.left,te=D.left-X,Ae=U.left-te,Ie=U.width+Ae,Je=Math.max(Ie,se.width),ot=window.innerWidth-Se,at=Br(te,[Se,Math.max(Se,ot-Je)]);l.style.minWidth=Ie+"px",l.style.left=at+"px"}else{const X=se.right-J.right,te=window.innerWidth-D.right-X,Ae=window.innerWidth-U.right-te,Ie=U.width+Ae,Je=Math.max(Ie,se.width),ot=window.innerWidth-Se,at=Br(te,[Se,Math.max(Se,ot-Je)]);l.style.minWidth=Ie+"px",l.style.right=at+"px"}const G=h(),M=window.innerHeight-Se*2,F=v.scrollHeight,B=window.getComputedStyle(m),W=parseInt(B.borderTopWidth,10),H=parseInt(B.paddingTop,10),S=parseInt(B.borderBottomWidth,10),R=parseInt(B.paddingBottom,10),ce=W+H+F+R+S,Te=Math.min(C.offsetHeight*5,ce),Be=window.getComputedStyle(v),nt=parseInt(Be.paddingTop,10),Xe=parseInt(Be.paddingBottom,10),Re=U.top+U.height/2-Se,He=M-Re,Ke=C.offsetHeight/2,L=C.offsetTop+Ke,Q=W+H+L,me=ce-Q;if(Q<=Re){const X=G.length>0&&C===G[G.length-1].ref.current;l.style.bottom="0px";const te=m.clientHeight-v.offsetTop-v.offsetHeight,Ae=Math.max(He,Ke+(X?Xe:0)+te+S),Ie=Q+Ae;l.style.height=Ie+"px"}else{const X=G.length>0&&C===G[0].ref.current;l.style.top="0px";const Ae=Math.max(Re,W+v.offsetTop+(X?nt:0)+Ke)+me;l.style.height=Ae+"px",v.scrollTop=Q-Re+v.offsetTop}l.style.margin=`${Se}px 0`,l.style.minHeight=Te+"px",l.style.maxHeight=M+"px",n?.(),requestAnimationFrame(()=>k.current=!0)}},[h,a.trigger,a.valueNode,l,m,v,C,T,a.dir,n]);Fe(()=>p(),[p]);const[w,E]=d.useState();Fe(()=>{m&&E(window.getComputedStyle(m).zIndex)},[m]);const V=d.useCallback(U=>{U&&I.current===!0&&(p(),y?.(),I.current=!1)},[p,y]);return t.jsx(Qa,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:k,onScrollButtonChange:V,children:t.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:t.jsx(ge.div,{...o,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Zs.displayName=Xa;var Ja="SelectPopperPosition",Xt=d.forwardRef((e,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:o=Se,...a}=e,i=Ut(r);return t.jsx(Oo,{...i,...a,ref:s,align:n,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Xt.displayName=Ja;var[Qa,Nr]=st(Ze,{}),Jt="SelectViewport",Xs=d.forwardRef((e,s)=>{const{__scopeSelect:r,nonce:n,...o}=e,a=Ue(Jt,r),i=Nr(Jt,r),l=ye(s,a.onViewportChange),u=d.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(Ft.Slot,{scope:r,children:t.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:fe(o.onScroll,m=>{const x=m.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:h}=i;if(h?.current&&b){const k=Math.abs(u.current-x.scrollTop);if(k>0){const I=window.innerHeight-Se*2,v=parseFloat(b.style.minHeight),C=parseFloat(b.style.height),T=Math.max(v,C);if(T<I){const y=T+k,p=Math.min(I,y),w=y-p;b.style.height=p+"px",b.style.bottom==="0px"&&(x.scrollTop=w>0?w:0,b.style.justifyContent="flex-end")}}}u.current=x.scrollTop})})})]})});Xs.displayName=Jt;var Js="SelectGroup",[ei,ti]=st(Js),ri=d.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,o=hr();return t.jsx(ei,{scope:r,id:o,children:t.jsx(ge.div,{role:"group","aria-labelledby":o,...n,ref:s})})});ri.displayName=Js;var Qs="SelectLabel",si=d.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,o=ti(Qs,r);return t.jsx(ge.div,{id:o.id,...n,ref:s})});si.displayName=Qs;var At="SelectItem",[ni,en]=st(At),tn=d.forwardRef((e,s)=>{const{__scopeSelect:r,value:n,disabled:o=!1,textValue:a,...i}=e,l=Ve(At,r),u=Ue(At,r),m=l.value===n,[x,b]=d.useState(a??""),[h,k]=d.useState(!1),I=ye(s,y=>u.itemRefCallback?.(y,n,o)),v=hr(),C=d.useRef("touch"),T=()=>{o||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(ni,{scope:r,value:n,disabled:o,textId:v,isSelected:m,onItemTextChange:d.useCallback(y=>{b(p=>p||(y?.textContent??"").trim())},[]),children:t.jsx(Ft.ItemSlot,{scope:r,value:n,disabled:o,textValue:x,children:t.jsx(ge.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":m&&h,"data-state":m?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:I,onFocus:fe(i.onFocus,()=>k(!0)),onBlur:fe(i.onBlur,()=>k(!1)),onClick:fe(i.onClick,()=>{C.current!=="mouse"&&T()}),onPointerUp:fe(i.onPointerUp,()=>{C.current==="mouse"&&T()}),onPointerDown:fe(i.onPointerDown,y=>{C.current=y.pointerType}),onPointerMove:fe(i.onPointerMove,y=>{C.current=y.pointerType,o?u.onItemLeave?.():C.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(i.onPointerLeave,y=>{y.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:fe(i.onKeyDown,y=>{u.searchRef?.current!==""&&y.key===" "||(Ha.includes(y.key)&&T(),y.key===" "&&y.preventDefault())})})})})});tn.displayName=At;var lt="SelectItemText",rn=d.forwardRef((e,s)=>{const{__scopeSelect:r,className:n,style:o,...a}=e,i=Ve(lt,r),l=Ue(lt,r),u=en(lt,r),m=Wa(lt,r),[x,b]=d.useState(null),h=ye(s,T=>b(T),u.onItemTextChange,T=>l.itemTextRefCallback?.(T,u.value,u.disabled)),k=x?.textContent,I=d.useMemo(()=>t.jsx("option",{value:u.value,disabled:u.disabled,children:k},u.value),[u.disabled,u.value,k]),{onNativeOptionAdd:v,onNativeOptionRemove:C}=m;return Fe(()=>(v(I),()=>C(I)),[v,C,I]),t.jsxs(t.Fragment,{children:[t.jsx(ge.span,{id:u.textId,...a,ref:h}),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?hs.createPortal(a.children,i.valueNode):null]})});rn.displayName=lt;var sn="SelectItemIndicator",nn=d.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e;return en(sn,r).isSelected?t.jsx(ge.span,{"aria-hidden":!0,...n,ref:s}):null});nn.displayName=sn;var Qt="SelectScrollUpButton",on=d.forwardRef((e,s)=>{const r=Ue(Qt,e.__scopeSelect),n=Nr(Qt,e.__scopeSelect),[o,a]=d.useState(!1),i=ye(s,n.onScrollButtonChange);return Fe(()=>{if(r.viewport&&r.isPositioned){let l=function(){const m=u.scrollTop>0;a(m)};const u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?t.jsx(ln,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=r;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});on.displayName=Qt;var er="SelectScrollDownButton",an=d.forwardRef((e,s)=>{const r=Ue(er,e.__scopeSelect),n=Nr(er,e.__scopeSelect),[o,a]=d.useState(!1),i=ye(s,n.onScrollButtonChange);return Fe(()=>{if(r.viewport&&r.isPositioned){let l=function(){const m=u.scrollHeight-u.clientHeight,x=Math.ceil(u.scrollTop)<m;a(x)};const u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?t.jsx(ln,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=r;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});an.displayName=er;var ln=d.forwardRef((e,s)=>{const{__scopeSelect:r,onAutoScroll:n,...o}=e,a=Ue("SelectScrollButton",r),i=d.useRef(null),l=Vt(r),u=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>u(),[u]),Fe(()=>{l().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),t.jsx(ge.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:fe(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:fe(o.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:fe(o.onPointerLeave,()=>{u()})})}),oi="SelectSeparator",ai=d.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e;return t.jsx(ge.div,{"aria-hidden":!0,...n,ref:s})});ai.displayName=oi;var tr="SelectArrow",ii=d.forwardRef((e,s)=>{const{__scopeSelect:r,...n}=e,o=Ut(r),a=Ve(tr,r),i=Ue(tr,r);return a.open&&i.position==="popper"?t.jsx(Fo,{...o,...n,ref:s}):null});ii.displayName=tr;var li="SelectBubbleInput",cn=d.forwardRef(({__scopeSelect:e,value:s,...r},n)=>{const o=d.useRef(null),a=ye(n,o),i=js(s);return d.useEffect(()=>{const l=o.current;if(!l)return;const u=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==s&&x){const b=new Event("change",{bubbles:!0});x.call(l,s),l.dispatchEvent(b)}},[i,s]),t.jsx(ge.select,{...r,style:{...jo,...r.style},ref:a,defaultValue:s})});cn.displayName=li;function dn(e){return e===""||e===void 0}function un(e){const s=qn(e),r=d.useRef(""),n=d.useRef(0),o=d.useCallback(i=>{const l=r.current+i;s(l),(function u(m){r.current=m,window.clearTimeout(n.current),m!==""&&(n.current=window.setTimeout(()=>u(""),1e3))})(l)},[s]),a=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,a]}function fn(e,s,r){const o=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,a=r?e.indexOf(r):-1;let i=ci(e,Math.max(a,0));o.length===1&&(i=i.filter(m=>m!==r));const u=i.find(m=>m.textValue.toLowerCase().startsWith(o.toLowerCase()));return u!==r?u:void 0}function ci(e,s){return e.map((r,n)=>e[(s+n)%e.length])}var di=Us,ui=Hs,fi=zs,mi=$s,hi=Ws,pi=qs,gi=Xs,xi=tn,vi=rn,yi=nn,bi=on,ji=an;function rr({...e}){return t.jsx(di,{"data-slot":"select",...e})}function sr({...e}){return t.jsx(fi,{"data-slot":"select-value",...e})}function nr({className:e,size:s="default",children:r,...n}){return t.jsxs(ui,{"data-slot":"select-trigger","data-size":s,className:K("flex w-fit items-center justify-between gap-2 whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 data-[size=default]:h-9 data-[size=sm]:h-8 data-[placeholder]:text-muted-foreground *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 dark:bg-input/30 dark:aria-invalid:ring-destructive/40 dark:hover:bg-input/50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...n,children:[r,t.jsx(mi,{asChild:!0,children:t.jsx(mt,{className:"size-4 opacity-50"})})]})}function or({className:e,children:s,position:r="popper",align:n="center",...o}){return t.jsx(hi,{children:t.jsxs(pi,{"data-slot":"select-content",className:K("data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=closed]:animate-out data-[state=open]:animate-in",r==="popper"&&"data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=bottom]:translate-y-1 data-[side=top]:-translate-y-1",e),position:r,align:n,...o,children:[t.jsx(wi,{}),t.jsx(gi,{className:K("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),t.jsx(Si,{})]})})}function ar({className:e,children:s,...r}){return t.jsxs(xi,{"data-slot":"select-item",className:K("relative flex w-full cursor-default select-none items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(yi,{children:t.jsx(ft,{className:"size-4"})})}),t.jsx(vi,{children:s})]})}function wi({className:e,...s}){return t.jsx(bi,{"data-slot":"select-scroll-up-button",className:K("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(Zo,{className:"size-4"})})}function Si({className:e,...s}){return t.jsx(ji,{"data-slot":"select-scroll-down-button",className:K("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(mt,{className:"size-4"})})}const Ni=({providers:e,defaultProviderId:s,onDefaultProviderChange:r,onAddProvider:n})=>t.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-blue)]/10",children:t.jsx("img",{src:Qn,alt:"BrowserOS",className:"h-8 w-8"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"LLM Providers"}),t.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Add your provider and choose the default LLM"}),t.jsxs("div",{className:"flex flex-col items-start gap-4 sm:flex-row sm:items-center",children:[t.jsx("label",{htmlFor:"provider-picker",className:"whitespace-nowrap font-medium text-sm",children:"Default Provider:"}),t.jsxs(rr,{value:s,onValueChange:r,children:[t.jsx(nr,{id:"provider-picker",className:"w-full flex-1 sm:max-w-xs",children:t.jsx(sr,{placeholder:"Select a provider"})}),t.jsx(or,{children:e.map(o=>t.jsx(ar,{value:o.id,children:o.name},o.id))})]}),t.jsxs(Z,{variant:"outline",onClick:n,className:"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/20 hover:text-[var(--accent-blue)]",children:[t.jsx(Ge,{className:"h-4 w-4"}),"Add custom provider"]})]})]})]})});var ht=e=>e.type==="checkbox",$e=e=>e instanceof Date,ve=e=>e==null;const mn=e=>typeof e=="object";var le=e=>!ve(e)&&!Array.isArray(e)&&mn(e)&&!$e(e),hn=e=>le(e)&&e.target?ht(e.target)?e.target.checked:e.target.value:e,Ci=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pn=(e,s)=>e.has(Ci(s)),_i=e=>{const s=e.constructor&&e.constructor.prototype;return le(s)&&s.hasOwnProperty("isPrototypeOf")},Cr=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function de(e){let s;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Cr&&(e instanceof Blob||n))&&(r||le(e)))if(s=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!_i(e))s=e;else for(const o in e)e.hasOwnProperty(o)&&(s[o]=de(e[o]));else return e;return s}var Bt=e=>/^\w*$/.test(e),ee=e=>e===void 0,_r=e=>Array.isArray(e)?e.filter(Boolean):[],Ir=e=>_r(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_=(e,s,r)=>{if(!s||!le(e))return r;const n=(Bt(s)?[s]:Ir(s)).reduce((o,a)=>ve(o)?o:o[a],e);return ee(n)||n===e?ee(e[s])?r:e[s]:n},be=e=>typeof e=="boolean",$=(e,s,r)=>{let n=-1;const o=Bt(s)?[s]:Ir(s),a=o.length,i=a-1;for(;++n<a;){const l=o[n];let u=r;if(n!==i){const m=e[l];u=le(m)||Array.isArray(m)?m:isNaN(+o[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=u,e=e[l]}};const kt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ne={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ke={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ar=O.createContext(null);Ar.displayName="HookFormContext";const Ht=()=>O.useContext(Ar),Ii=e=>{const{children:s,...r}=e;return O.createElement(Ar.Provider,{value:r},s)};var gn=(e,s,r,n=!0)=>{const o={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(o,a,{get:()=>{const i=a;return s._proxyFormState[i]!==Ne.all&&(s._proxyFormState[i]=!n||Ne.all),r&&(r[i]=!0),e[i]}});return o};const kr=typeof window<"u"?O.useLayoutEffect:O.useEffect;function xn(e){const s=Ht(),{control:r=s.control,disabled:n,name:o,exact:a}=e||{},[i,l]=O.useState(r._formState),u=O.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return kr(()=>r._subscribe({name:o,formState:u.current,exact:a,callback:m=>{!n&&l({...r._formState,...m})}}),[o,n,a]),O.useEffect(()=>{u.current.isValid&&r._setValid(!0)},[r]),O.useMemo(()=>gn(i,r,u.current,!1),[i,r])}var je=e=>typeof e=="string",ir=(e,s,r,n,o)=>je(e)?(n&&s.watch.add(e),_(r,e,o)):Array.isArray(e)?e.map(a=>(n&&s.watch.add(a),_(r,a))):(n&&(s.watchAll=!0),r),lr=e=>ve(e)||!mn(e);function Ce(e,s,r=new WeakSet){if(lr(e)||lr(s))return Object.is(e,s);if($e(e)&&$e(s))return e.getTime()===s.getTime();const n=Object.keys(e),o=Object.keys(s);if(n.length!==o.length)return!1;if(r.has(e)||r.has(s))return!0;r.add(e),r.add(s);for(const a of n){const i=e[a];if(!o.includes(a))return!1;if(a!=="ref"){const l=s[a];if($e(i)&&$e(l)||le(i)&&le(l)||Array.isArray(i)&&Array.isArray(l)?!Ce(i,l,r):!Object.is(i,l))return!1}}return!0}function Ai(e){const s=Ht(),{control:r=s.control,name:n,defaultValue:o,disabled:a,exact:i,compute:l}=e||{},u=O.useRef(o),m=O.useRef(l),x=O.useRef(void 0),b=O.useRef(r),h=O.useRef(n);m.current=l;const[k,I]=O.useState(()=>{const w=r._getWatch(n,u.current);return m.current?m.current(w):w}),v=O.useCallback(w=>{const E=ir(n,r._names,w||r._formValues,!1,u.current);return m.current?m.current(E):E},[r._formValues,r._names,n]),C=O.useCallback(w=>{if(!a){const E=ir(n,r._names,w||r._formValues,!1,u.current);if(m.current){const V=m.current(E);Ce(V,x.current)||(I(V),x.current=V)}else I(E)}},[r._formValues,r._names,a,n]);kr(()=>((b.current!==r||!Ce(h.current,n))&&(b.current=r,h.current=n,C()),r._subscribe({name:n,formState:{values:!0},exact:i,callback:w=>{C(w.values)}})),[r,i,n,C]),O.useEffect(()=>r._removeUnmounted());const T=b.current!==r,y=h.current,p=O.useMemo(()=>{if(a)return null;const w=!T&&!Ce(y,n);return T||w?v():null},[a,T,n,y,v]);return p!==null?p:k}function ki(e){const s=Ht(),{name:r,disabled:n,control:o=s.control,shouldUnregister:a,defaultValue:i,exact:l=!0}=e,u=pn(o._names.array,r),m=O.useMemo(()=>_(o._formValues,r,_(o._defaultValues,r,i)),[o,r,i]),x=Ai({control:o,name:r,defaultValue:m,exact:l}),b=xn({control:o,name:r,exact:l}),h=O.useRef(e),k=O.useRef(void 0),I=O.useRef(o.register(r,{...e.rules,value:x,...be(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const v=O.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!_(b.errors,r)},isDirty:{enumerable:!0,get:()=>!!_(b.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!_(b.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!_(b.validatingFields,r)},error:{enumerable:!0,get:()=>_(b.errors,r)}}),[b,r]),C=O.useCallback(w=>I.current.onChange({target:{value:hn(w),name:r},type:kt.CHANGE}),[r]),T=O.useCallback(()=>I.current.onBlur({target:{value:_(o._formValues,r),name:r},type:kt.BLUR}),[r,o._formValues]),y=O.useCallback(w=>{const E=_(o._fields,r);E&&w&&(E._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:V=>w.setCustomValidity(V),reportValidity:()=>w.reportValidity()})},[o._fields,r]),p=O.useMemo(()=>({name:r,value:x,...be(n)||b.disabled?{disabled:b.disabled||n}:{},onChange:C,onBlur:T,ref:y}),[r,n,b.disabled,C,T,y,x]);return O.useEffect(()=>{const w=o._options.shouldUnregister||a,E=k.current;E&&E!==r&&!u&&o.unregister(E),o.register(r,{...h.current.rules,...be(h.current.disabled)?{disabled:h.current.disabled}:{}});const V=(U,se)=>{const D=_(o._fields,U);D&&D._f&&(D._f.mount=se)};if(V(r,!0),w){const U=de(_(o._options.defaultValues,r,h.current.defaultValue));$(o._defaultValues,r,U),ee(_(o._formValues,r))&&$(o._formValues,r,U)}return!u&&o.register(r),k.current=r,()=>{(u?w&&!o._state.action:w)?o.unregister(r):V(r,!1)}},[r,o,u,a]),O.useEffect(()=>{o._setDisabledField({disabled:n,name:r})},[n,r,o]),O.useMemo(()=>({field:p,formState:b,fieldState:v}),[p,b,v])}const Ei=e=>e.render(ki(e));var Er=(e,s,r,n,o)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:o||!0}}:{},dt=e=>Array.isArray(e)?e:[e],Hr=()=>{let e=[];return{get observers(){return e},next:o=>{for(const a of e)a.next&&a.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(a=>a!==o)}}),unsubscribe:()=>{e=[]}}};function vn(e,s){const r={};for(const n in e)if(e.hasOwnProperty(n)){const o=e[n],a=s[n];if(o&&le(o)&&a){const i=vn(o,a);le(i)&&(r[n]=i)}else e[n]&&(r[n]=a)}return r}var pe=e=>le(e)&&!Object.keys(e).length,Pr=e=>e.type==="file",_e=e=>typeof e=="function",Et=e=>{if(!Cr)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},yn=e=>e.type==="select-multiple",Tr=e=>e.type==="radio",Pi=e=>Tr(e)||ht(e),Gt=e=>Et(e)&&e.isConnected;function Ti(e,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)e=ee(e)?n++:e[s[n++]];return e}function Ri(e){for(const s in e)if(e.hasOwnProperty(s)&&!ee(e[s]))return!1;return!0}function ne(e,s){const r=Array.isArray(s)?s:Bt(s)?[s]:Ir(s),n=r.length===1?e:Ti(e,r),o=r.length-1,a=r[o];return n&&delete n[a],o!==0&&(le(n)&&pe(n)||Array.isArray(n)&&Ri(n))&&ne(e,r.slice(0,-1)),e}var Di=e=>{for(const s in e)if(_e(e[s]))return!0;return!1};function bn(e){return Array.isArray(e)||le(e)&&!Di(e)}function cr(e,s={}){for(const r in e){const n=e[r];bn(n)?(s[r]=Array.isArray(n)?[]:{},cr(n,s[r])):ee(n)||(s[r]=!0)}return s}function et(e,s,r){r||(r=cr(s));for(const n in e){const o=e[n];if(bn(o))ee(s)||lr(r[n])?r[n]=cr(o,Array.isArray(o)?[]:{}):et(o,ve(s)?{}:s[n],r[n]);else{const a=s[n];r[n]=!Ce(o,a)}}return r}const Kr={value:!1,isValid:!1},zr={value:!0,isValid:!0};var jn=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ee(e[0].attributes.value)?ee(e[0].value)||e[0].value===""?zr:{value:e[0].value,isValid:!0}:zr:Kr}return Kr},wn=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>ee(e)?e:s?e===""?NaN:e&&+e:r&&je(e)?new Date(e):n?n(e):e;const $r={isValid:!1,value:null};var Sn=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,$r):$r;function Wr(e){const s=e.ref;return Pr(s)?s.files:Tr(s)?Sn(e.refs).value:yn(s)?[...s.selectedOptions].map(({value:r})=>r):ht(s)?jn(e.refs).value:wn(ee(s.value)?e.ref.value:s.value,e)}var Mi=(e,s,r,n)=>{const o={};for(const a of e){const i=_(s,a);i&&$(o,a,i._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},Pt=e=>e instanceof RegExp,it=e=>ee(e)?e:Pt(e)?e.source:le(e)?Pt(e.value)?e.value.source:e.value:e,qr=e=>({isOnSubmit:!e||e===Ne.onSubmit,isOnBlur:e===Ne.onBlur,isOnChange:e===Ne.onChange,isOnAll:e===Ne.all,isOnTouch:e===Ne.onTouched});const Gr="AsyncFunction";var Li=e=>!!e&&!!e.validate&&!!(_e(e.validate)&&e.validate.constructor.name===Gr||le(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===Gr)),Oi=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Yr=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ut=(e,s,r,n)=>{for(const o of r||Object.keys(e)){const a=_(e,o);if(a){const{_f:i,...l}=a;if(i){if(i.refs&&i.refs[0]&&s(i.refs[0],o)&&!n)return!0;if(i.ref&&s(i.ref,i.name)&&!n)return!0;if(ut(l,s))break}else if(le(l)&&ut(l,s))break}}};function Zr(e,s,r){const n=_(e,r);if(n||Bt(r))return{error:n,name:r};const o=r.split(".");for(;o.length;){const a=o.join("."),i=_(s,a),l=_(e,a);if(i&&!Array.isArray(i)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};o.pop()}return{name:r}}var Fi=(e,s,r,n)=>{r(e);const{name:o,...a}=e;return pe(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(i=>s[i]===(!n||Ne.all))},Vi=(e,s,r)=>!e||!s||e===s||dt(e).some(n=>n&&(r?n===s:n.startsWith(s)||s.startsWith(n))),Ui=(e,s,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(s||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,Bi=(e,s)=>!_r(_(e,s)).length&&ne(e,s),Hi=(e,s,r)=>{const n=dt(_(e,r));return $(n,"root",s[r]),$(e,r,n),e};function Xr(e,s,r="validate"){if(je(e)||Array.isArray(e)&&e.every(je)||be(e)&&!e)return{type:r,message:je(e)?e:"",ref:s}}var Qe=e=>le(e)&&!Pt(e)?e:{value:e,message:""},Jr=async(e,s,r,n,o,a)=>{const{ref:i,refs:l,required:u,maxLength:m,minLength:x,min:b,max:h,pattern:k,validate:I,name:v,valueAsNumber:C,mount:T}=e._f,y=_(r,v);if(!T||s.has(v))return{};const p=l?l[0]:i,w=M=>{o&&p.reportValidity&&(p.setCustomValidity(be(M)?"":M||""),p.reportValidity())},E={},V=Tr(i),U=ht(i),se=V||U,D=(C||Pr(i))&&ee(i.value)&&ee(y)||Et(i)&&i.value===""||y===""||Array.isArray(y)&&!y.length,J=Er.bind(null,v,n,E),G=(M,F,B,W=ke.maxLength,H=ke.minLength)=>{const S=M?F:B;E[v]={type:M?W:H,message:S,ref:i,...J(M?W:H,S)}};if(a?!Array.isArray(y)||!y.length:u&&(!se&&(D||ve(y))||be(y)&&!y||U&&!jn(l).isValid||V&&!Sn(l).isValid)){const{value:M,message:F}=je(u)?{value:!!u,message:u}:Qe(u);if(M&&(E[v]={type:ke.required,message:F,ref:p,...J(ke.required,F)},!n))return w(F),E}if(!D&&(!ve(b)||!ve(h))){let M,F;const B=Qe(h),W=Qe(b);if(!ve(y)&&!isNaN(y)){const H=i.valueAsNumber||y&&+y;ve(B.value)||(M=H>B.value),ve(W.value)||(F=H<W.value)}else{const H=i.valueAsDate||new Date(y),S=Te=>new Date(new Date().toDateString()+" "+Te),R=i.type=="time",ce=i.type=="week";je(B.value)&&y&&(M=R?S(y)>S(B.value):ce?y>B.value:H>new Date(B.value)),je(W.value)&&y&&(F=R?S(y)<S(W.value):ce?y<W.value:H<new Date(W.value))}if((M||F)&&(G(!!M,B.message,W.message,ke.max,ke.min),!n))return w(E[v].message),E}if((m||x)&&!D&&(je(y)||a&&Array.isArray(y))){const M=Qe(m),F=Qe(x),B=!ve(M.value)&&y.length>+M.value,W=!ve(F.value)&&y.length<+F.value;if((B||W)&&(G(B,M.message,F.message),!n))return w(E[v].message),E}if(k&&!D&&je(y)){const{value:M,message:F}=Qe(k);if(Pt(M)&&!y.match(M)&&(E[v]={type:ke.pattern,message:F,ref:i,...J(ke.pattern,F)},!n))return w(F),E}if(I){if(_e(I)){const M=await I(y,r),F=Xr(M,p);if(F&&(E[v]={...F,...J(ke.validate,F.message)},!n))return w(F.message),E}else if(le(I)){let M={};for(const F in I){if(!pe(M)&&!n)break;const B=Xr(await I[F](y,r),p,F);B&&(M={...B,...J(F,B.message)},w(B.message),n&&(E[v]=M))}if(!pe(M)&&(E[v]={ref:p,...M},!n))return E}}return w(!0),E};const Ki={mode:Ne.onSubmit,reValidateMode:Ne.onChange,shouldFocusError:!0};function zi(e={}){let s={...Ki,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:_e(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},o=le(s.defaultValues)||le(s.values)?de(s.defaultValues||s.values)||{}:{},a=s.shouldUnregister?{}:de(o),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,m=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const h={array:Hr(),state:Hr()},k=s.criteriaMode===Ne.all,I=c=>f=>{clearTimeout(m),m=setTimeout(c,f)},v=async c=>{if(!s.disabled&&(x.isValid||b.isValid||c)){const f=s.resolver?pe((await U()).errors):await D(n,!0);f!==r.isValid&&h.state.next({isValid:f})}},C=(c,f)=>{!s.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((c||Array.from(l.mount)).forEach(g=>{g&&(f?$(r.validatingFields,g,f):ne(r.validatingFields,g))}),h.state.next({validatingFields:r.validatingFields,isValidating:!pe(r.validatingFields)}))},T=(c,f=[],g,A,N=!0,j=!0)=>{if(A&&g&&!s.disabled){if(i.action=!0,j&&Array.isArray(_(n,c))){const P=g(_(n,c),A.argA,A.argB);N&&$(n,c,P)}if(j&&Array.isArray(_(r.errors,c))){const P=g(_(r.errors,c),A.argA,A.argB);N&&$(r.errors,c,P),Bi(r.errors,c)}if((x.touchedFields||b.touchedFields)&&j&&Array.isArray(_(r.touchedFields,c))){const P=g(_(r.touchedFields,c),A.argA,A.argB);N&&$(r.touchedFields,c,P)}(x.dirtyFields||b.dirtyFields)&&(r.dirtyFields=et(o,a)),h.state.next({name:c,isDirty:G(c,f),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else $(a,c,f)},y=(c,f)=>{$(r.errors,c,f),h.state.next({errors:r.errors})},p=c=>{r.errors=c,h.state.next({errors:r.errors,isValid:!1})},w=(c,f,g,A)=>{const N=_(n,c);if(N){const j=_(a,c,ee(g)?_(o,c):g);ee(j)||A&&A.defaultChecked||f?$(a,c,f?j:Wr(N._f)):B(c,j),i.mount&&!i.action&&v()}},E=(c,f,g,A,N)=>{let j=!1,P=!1;const z={name:c};if(!s.disabled){if(!g||A){(x.isDirty||b.isDirty)&&(P=r.isDirty,r.isDirty=z.isDirty=G(),j=P!==z.isDirty);const Y=Ce(_(o,c),f);P=!!_(r.dirtyFields,c),Y?ne(r.dirtyFields,c):$(r.dirtyFields,c,!0),z.dirtyFields=r.dirtyFields,j=j||(x.dirtyFields||b.dirtyFields)&&P!==!Y}if(g){const Y=_(r.touchedFields,c);Y||($(r.touchedFields,c,g),z.touchedFields=r.touchedFields,j=j||(x.touchedFields||b.touchedFields)&&Y!==g)}j&&N&&h.state.next(z)}return j?z:{}},V=(c,f,g,A)=>{const N=_(r.errors,c),j=(x.isValid||b.isValid)&&be(f)&&r.isValid!==f;if(s.delayError&&g?(u=I(()=>y(c,g)),u(s.delayError)):(clearTimeout(m),u=null,g?$(r.errors,c,g):ne(r.errors,c)),(g?!Ce(N,g):N)||!pe(A)||j){const P={...A,...j&&be(f)?{isValid:f}:{},errors:r.errors,name:c};r={...r,...P},h.state.next(P)}},U=async c=>{C(c,!0);const f=await s.resolver(a,s.context,Mi(c||l.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return C(c),f},se=async c=>{const{errors:f}=await U(c);if(c)for(const g of c){const A=_(f,g);A?$(r.errors,g,A):ne(r.errors,g)}else r.errors=f;return f},D=async(c,f,g={valid:!0})=>{for(const A in c){const N=c[A];if(N){const{_f:j,...P}=N;if(j){const z=l.array.has(j.name),Y=N._f&&Li(N._f);Y&&x.validatingFields&&C([j.name],!0);const we=await Jr(N,l.disabled,a,k,s.shouldUseNativeValidation&&!f,z);if(Y&&x.validatingFields&&C([j.name]),we[j.name]&&(g.valid=!1,f))break;!f&&(_(we,j.name)?z?Hi(r.errors,we,j.name):$(r.errors,j.name,we[j.name]):ne(r.errors,j.name))}!pe(P)&&await D(P,f,g)}}return g.valid},J=()=>{for(const c of l.unMount){const f=_(n,c);f&&(f._f.refs?f._f.refs.every(g=>!Gt(g)):!Gt(f._f.ref))&&L(c)}l.unMount=new Set},G=(c,f)=>!s.disabled&&(c&&f&&$(a,c,f),!Ce(Te(),o)),M=(c,f,g)=>ir(c,l,{...i.mount?a:ee(f)?o:je(c)?{[c]:f}:f},g,f),F=c=>_r(_(i.mount?a:o,c,s.shouldUnregister?_(o,c,[]):[])),B=(c,f,g={})=>{const A=_(n,c);let N=f;if(A){const j=A._f;j&&(!j.disabled&&$(a,c,wn(f,j)),N=Et(j.ref)&&ve(f)?"":f,yn(j.ref)?[...j.ref.options].forEach(P=>P.selected=N.includes(P.value)):j.refs?ht(j.ref)?j.refs.forEach(P=>{(!P.defaultChecked||!P.disabled)&&(Array.isArray(N)?P.checked=!!N.find(z=>z===P.value):P.checked=N===P.value||!!N)}):j.refs.forEach(P=>P.checked=P.value===N):Pr(j.ref)?j.ref.value="":(j.ref.value=N,j.ref.type||h.state.next({name:c,values:de(a)})))}(g.shouldDirty||g.shouldTouch)&&E(c,N,g.shouldTouch,g.shouldDirty,!0),g.shouldValidate&&ce(c)},W=(c,f,g)=>{for(const A in f){if(!f.hasOwnProperty(A))return;const N=f[A],j=c+"."+A,P=_(n,j);(l.array.has(c)||le(N)||P&&!P._f)&&!$e(N)?W(j,N,g):B(j,N,g)}},H=(c,f,g={})=>{const A=_(n,c),N=l.array.has(c),j=de(f);$(a,c,j),N?(h.array.next({name:c,values:de(a)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&g.shouldDirty&&h.state.next({name:c,dirtyFields:et(o,a),isDirty:G(c,j)})):A&&!A._f&&!ve(j)?W(c,j,g):B(c,j,g),Yr(c,l)&&h.state.next({...r,name:c}),h.state.next({name:i.mount?c:void 0,values:de(a)})},S=async c=>{i.mount=!0;const f=c.target;let g=f.name,A=!0;const N=_(n,g),j=Y=>{A=Number.isNaN(Y)||$e(Y)&&isNaN(Y.getTime())||Ce(Y,_(a,g,Y))},P=qr(s.mode),z=qr(s.reValidateMode);if(N){let Y,we;const pt=f.type?Wr(N._f):hn(c),De=c.type===kt.BLUR||c.type===kt.FOCUS_OUT,Dn=!Oi(N._f)&&!s.resolver&&!_(r.errors,g)&&!N._f.deps||Ui(De,_(r.touchedFields,g),r.isSubmitted,z,P),$t=Yr(g,l,De);$(a,g,pt),De?(!f||!f.readOnly)&&(N._f.onBlur&&N._f.onBlur(c),u&&u(0)):N._f.onChange&&N._f.onChange(c);const Wt=E(g,pt,De),Mn=!pe(Wt)||$t;if(!De&&h.state.next({name:g,type:c.type,values:de(a)}),Dn)return(x.isValid||b.isValid)&&(s.mode==="onBlur"?De&&v():De||v()),Mn&&h.state.next({name:g,...$t?{}:Wt});if(!De&&$t&&h.state.next({...r}),s.resolver){const{errors:Or}=await U([g]);if(j(pt),A){const Ln=Zr(r.errors,n,g),Fr=Zr(Or,n,Ln.name||g);Y=Fr.error,g=Fr.name,we=pe(Or)}}else C([g],!0),Y=(await Jr(N,l.disabled,a,k,s.shouldUseNativeValidation))[g],C([g]),j(pt),A&&(Y?we=!1:(x.isValid||b.isValid)&&(we=await D(n,!0)));A&&(N._f.deps&&(!Array.isArray(N._f.deps)||N._f.deps.length>0)&&ce(N._f.deps),V(g,we,Y,Wt))}},R=(c,f)=>{if(_(r.errors,f)&&c.focus)return c.focus(),1},ce=async(c,f={})=>{let g,A;const N=dt(c);if(s.resolver){const j=await se(ee(c)?c:N);g=pe(j),A=c?!N.some(P=>_(j,P)):g}else c?(A=(await Promise.all(N.map(async j=>{const P=_(n,j);return await D(P&&P._f?{[j]:P}:P)}))).every(Boolean),!(!A&&!r.isValid)&&v()):A=g=await D(n);return h.state.next({...!je(c)||(x.isValid||b.isValid)&&g!==r.isValid?{}:{name:c},...s.resolver||!c?{isValid:g}:{},errors:r.errors}),f.shouldFocus&&!A&&ut(n,R,c?N:l.mount),A},Te=(c,f)=>{let g={...i.mount?a:o};return f&&(g=vn(f.dirtyFields?r.dirtyFields:r.touchedFields,g)),ee(c)?g:je(c)?_(g,c):c.map(A=>_(g,A))},Be=(c,f)=>({invalid:!!_((f||r).errors,c),isDirty:!!_((f||r).dirtyFields,c),error:_((f||r).errors,c),isValidating:!!_(r.validatingFields,c),isTouched:!!_((f||r).touchedFields,c)}),nt=c=>{c&&dt(c).forEach(f=>ne(r.errors,f)),h.state.next({errors:c?r.errors:{}})},Xe=(c,f,g)=>{const A=(_(n,c,{_f:{}})._f||{}).ref,N=_(r.errors,c)||{},{ref:j,message:P,type:z,...Y}=N;$(r.errors,c,{...Y,...f,ref:A}),h.state.next({name:c,errors:r.errors,isValid:!1}),g&&g.shouldFocus&&A&&A.focus&&A.focus()},Re=(c,f)=>_e(c)?h.state.subscribe({next:g=>"values"in g&&c(M(void 0,f),g)}):M(c,f,!0),He=c=>h.state.subscribe({next:f=>{Vi(c.name,f.name,c.exact)&&Fi(f,c.formState||x,at,c.reRenderRoot)&&c.callback({values:{...a},...r,...f,defaultValues:o})}}).unsubscribe,Ke=c=>(i.mount=!0,b={...b,...c.formState},He({...c,formState:b})),L=(c,f={})=>{for(const g of c?dt(c):l.mount)l.mount.delete(g),l.array.delete(g),f.keepValue||(ne(n,g),ne(a,g)),!f.keepError&&ne(r.errors,g),!f.keepDirty&&ne(r.dirtyFields,g),!f.keepTouched&&ne(r.touchedFields,g),!f.keepIsValidating&&ne(r.validatingFields,g),!s.shouldUnregister&&!f.keepDefaultValue&&ne(o,g);h.state.next({values:de(a)}),h.state.next({...r,...f.keepDirty?{isDirty:G()}:{}}),!f.keepIsValid&&v()},Q=({disabled:c,name:f})=>{(be(c)&&i.mount||c||l.disabled.has(f))&&(c?l.disabled.add(f):l.disabled.delete(f))},me=(c,f={})=>{let g=_(n,c);const A=be(f.disabled)||be(s.disabled);return $(n,c,{...g||{},_f:{...g&&g._f?g._f:{ref:{name:c}},name:c,mount:!0,...f}}),l.mount.add(c),g?Q({disabled:be(f.disabled)?f.disabled:s.disabled,name:c}):w(c,!0,f.value),{...A?{disabled:f.disabled||s.disabled}:{},...s.progressive?{required:!!f.required,min:it(f.min),max:it(f.max),minLength:it(f.minLength),maxLength:it(f.maxLength),pattern:it(f.pattern)}:{},name:c,onChange:S,onBlur:S,ref:N=>{if(N){me(c,f),g=_(n,c);const j=ee(N.value)&&N.querySelectorAll&&N.querySelectorAll("input,select,textarea")[0]||N,P=Pi(j),z=g._f.refs||[];if(P?z.find(Y=>Y===j):j===g._f.ref)return;$(n,c,{_f:{...g._f,...P?{refs:[...z.filter(Gt),j,...Array.isArray(_(o,c))?[{}]:[]],ref:{type:j.type,name:c}}:{ref:j}}}),w(c,!1,void 0,j)}else g=_(n,c,{}),g._f&&(g._f.mount=!1),(s.shouldUnregister||f.shouldUnregister)&&!(pn(l.array,c)&&i.action)&&l.unMount.add(c)}}},q=()=>s.shouldFocusError&&ut(n,R,l.mount),X=c=>{be(c)&&(h.state.next({disabled:c}),ut(n,(f,g)=>{const A=_(n,g);A&&(f.disabled=A._f.disabled||c,Array.isArray(A._f.refs)&&A._f.refs.forEach(N=>{N.disabled=A._f.disabled||c}))},0,!1))},te=(c,f)=>async g=>{let A;g&&(g.preventDefault&&g.preventDefault(),g.persist&&g.persist());let N=de(a);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:j,values:P}=await U();r.errors=j,N=de(P)}else await D(n);if(l.disabled.size)for(const j of l.disabled)ne(N,j);if(ne(r.errors,"root"),pe(r.errors)){h.state.next({errors:{}});try{await c(N,g)}catch(j){A=j}}else f&&await f({...r.errors},g),q(),setTimeout(q);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:pe(r.errors)&&!A,submitCount:r.submitCount+1,errors:r.errors}),A)throw A},Ae=(c,f={})=>{_(n,c)&&(ee(f.defaultValue)?H(c,de(_(o,c))):(H(c,f.defaultValue),$(o,c,de(f.defaultValue))),f.keepTouched||ne(r.touchedFields,c),f.keepDirty||(ne(r.dirtyFields,c),r.isDirty=f.defaultValue?G(c,de(_(o,c))):G()),f.keepError||(ne(r.errors,c),x.isValid&&v()),h.state.next({...r}))},Ie=(c,f={})=>{const g=c?de(c):o,A=de(g),N=pe(c),j=N?o:A;if(f.keepDefaultValues||(o=g),!f.keepValues){if(f.keepDirtyValues){const P=new Set([...l.mount,...Object.keys(et(o,a))]);for(const z of Array.from(P))_(r.dirtyFields,z)?$(j,z,_(a,z)):H(z,_(j,z))}else{if(Cr&&ee(c))for(const P of l.mount){const z=_(n,P);if(z&&z._f){const Y=Array.isArray(z._f.refs)?z._f.refs[0]:z._f.ref;if(Et(Y)){const we=Y.closest("form");if(we){we.reset();break}}}}if(f.keepFieldsRef)for(const P of l.mount)H(P,_(j,P));else n={}}a=s.shouldUnregister?f.keepDefaultValues?de(o):{}:de(j),h.array.next({values:{...j}}),h.state.next({values:{...j}})}l={mount:f.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!x.isValid||!!f.keepIsValid||!!f.keepDirtyValues||!s.shouldUnregister&&!pe(j),i.watch=!!s.shouldUnregister,h.state.next({submitCount:f.keepSubmitCount?r.submitCount:0,isDirty:N?!1:f.keepDirty?r.isDirty:!!(f.keepDefaultValues&&!Ce(c,o)),isSubmitted:f.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N?{}:f.keepDirtyValues?f.keepDefaultValues&&a?et(o,a):r.dirtyFields:f.keepDefaultValues&&c?et(o,c):f.keepDirty?r.dirtyFields:{},touchedFields:f.keepTouched?r.touchedFields:{},errors:f.keepErrors?r.errors:{},isSubmitSuccessful:f.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Je=(c,f)=>Ie(_e(c)?c(a):c,f),ot=(c,f={})=>{const g=_(n,c),A=g&&g._f;if(A){const N=A.refs?A.refs[0]:A.ref;N.focus&&(N.focus(),f.shouldSelect&&_e(N.select)&&N.select())}},at=c=>{r={...r,...c}},Lr={control:{register:me,unregister:L,getFieldState:Be,handleSubmit:te,setError:Xe,_subscribe:He,_runSchema:U,_focusError:q,_getWatch:M,_getDirty:G,_setValid:v,_setFieldArray:T,_setDisabledField:Q,_setErrors:p,_getFieldArray:F,_reset:Ie,_resetDefaultValues:()=>_e(s.defaultValues)&&s.defaultValues().then(c=>{Je(c,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:J,_disableForm:X,_subjects:h,_proxyFormState:x,get _fields(){return n},get _formValues(){return a},get _state(){return i},set _state(c){i=c},get _defaultValues(){return o},get _names(){return l},set _names(c){l=c},get _formState(){return r},get _options(){return s},set _options(c){s={...s,...c}}},subscribe:Ke,trigger:ce,register:me,handleSubmit:te,watch:Re,setValue:H,getValues:Te,reset:Je,resetField:Ae,clearErrors:nt,unregister:L,setError:Xe,setFocus:ot,getFieldState:Be};return{...Lr,formControl:Lr}}function Rr(e={}){const s=O.useRef(void 0),r=O.useRef(void 0),[n,o]=O.useState({isDirty:!1,isValidating:!1,isLoading:_e(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:_e(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:n},e.defaultValues&&!_e(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...l}=zi(e);s.current={...l,formState:n}}const a=s.current.control;return a._options=e,kr(()=>{const i=a._subscribe({formState:a._proxyFormState,callback:()=>o({...a._formState}),reRenderRoot:!0});return o(l=>({...l,isReady:!0})),a._formState.isReady=!0,i},[a]),O.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),O.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),O.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),O.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),O.useEffect(()=>{if(a._proxyFormState.isDirty){const i=a._getDirty();i!==n.isDirty&&a._subjects.state.next({isDirty:i})}},[a,n.isDirty]),O.useEffect(()=>{var i;e.values&&!Ce(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((i=a._options.resetOptions)===null||i===void 0)&&i.keepIsValid||a._setValid(),r.current=e.values,o(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),O.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),s.current.formState=gn(n,a),s.current}const Qr=(e,s,r)=>{if(e&&"reportValidity"in e){const n=_(r,s);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},dr=(e,s)=>{for(const r in s.fields){const n=s.fields[r];n&&n.ref&&"reportValidity"in n.ref?Qr(n.ref,r,e):n&&n.refs&&n.refs.forEach(o=>Qr(o,r,e))}},es=(e,s)=>{s.shouldUseNativeValidation&&dr(e,s);const r={};for(const n in e){const o=_(s.fields,n),a=Object.assign(e[n]||{},{ref:o&&o.ref});if($i(s.names||Object.keys(e),n)){const i=Object.assign({},_(r,n));$(i,"root",a),$(r,n,i)}else $(r,n,a)}return r},$i=(e,s)=>{const r=ts(s);return e.some(n=>ts(n).match(`^${r}\\.\\d+`))};function ts(e){return e.replace(/\]|\[/g,"")}function rs(e,s){try{var r=e()}catch(n){return s(n)}return r&&r.then?r.then(void 0,s):r}function Wi(e,s){for(var r={};e.length;){var n=e[0],o=n.code,a=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[i]={message:l.message,type:l.code}}else r[i]={message:a,type:o};if("unionErrors"in n&&n.unionErrors.forEach(function(x){return x.errors.forEach(function(b){return e.push(b)})}),s){var u=r[i].types,m=u&&u[n.code];r[i]=Er(i,s,r,o,m?[].concat(m,n.message):n.message)}e.shift()}return r}function qi(e,s){for(var r={};e.length;){var n=e[0],o=n.code,a=n.message,i=n.path.join(".");if(!r[i])if(n.code==="invalid_union"&&n.errors.length>0){var l=n.errors[0][0];r[i]={message:l.message,type:l.code}}else r[i]={message:a,type:o};if(n.code==="invalid_union"&&n.errors.forEach(function(x){return x.forEach(function(b){return e.push(b)})}),s){var u=r[i].types,m=u&&u[n.code];r[i]=Er(i,s,r,o,m?[].concat(m,n.message):n.message)}e.shift()}return r}function Dr(e,s,r){if(r===void 0&&(r={}),(function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def})(e))return function(n,o,a){try{return Promise.resolve(rs(function(){return Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,s)).then(function(i){return a.shouldUseNativeValidation&&dr({},a),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if((function(l){return Array.isArray(l?.issues)})(i))return{values:{},errors:es(Wi(i.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}};if((function(n){return"_zod"in n&&typeof n._zod=="object"})(e))return function(n,o,a){try{return Promise.resolve(rs(function(){return Promise.resolve((r.mode==="sync"?eo:to)(e,n,s)).then(function(i){return a.shouldUseNativeValidation&&dr({},a),{errors:{},values:r.raw?Object.assign({},n):i}})},function(i){if((function(l){return l instanceof ro})(i))return{values:{},errors:es(qi(i.issues,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}};throw new Error("Invalid input: not a Zod schema")}const Mr=Ii,Nn=d.createContext({}),oe=({...e})=>t.jsx(Nn.Provider,{value:{name:e.name},children:t.jsx(Ei,{...e})}),Kt=()=>{const e=d.useContext(Nn),s=d.useContext(Cn),{getFieldState:r}=Ht(),n=xn({name:e.name}),o=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=s;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...o}},Cn=d.createContext({});function ae({className:e,...s}){const r=d.useId();return t.jsx(Cn.Provider,{value:{id:r},children:t.jsx("div",{"data-slot":"form-item",className:K("grid gap-2",e),...s})})}function ie({className:e,...s}){const{error:r,formItemId:n}=Kt();return t.jsx(ws,{"data-slot":"form-label","data-error":!!r,className:K("data-[error=true]:text-destructive",e),htmlFor:n,...s})}function re({...e}){const{error:s,formItemId:r,formDescriptionId:n,formMessageId:o}=Kt();return t.jsx(fs,{"data-slot":"form-control",id:r,"aria-describedby":s?`${n} ${o}`:`${n}`,"aria-invalid":!!s,...e})}function Le({className:e,...s}){const{formDescriptionId:r}=Kt();return t.jsx("p",{"data-slot":"form-description",id:r,className:K("text-muted-foreground text-sm",e),...s})}function ue({className:e,...s}){const{error:r,formMessageId:n}=Kt(),o=r?String(r?.message??""):s.children;return o?t.jsx("p",{"data-slot":"form-message",id:n,className:K("text-destructive text-sm",e),...s,children:o}):null}const _n=[{id:"openai",name:"OpenAI",defaultBaseUrl:"https://api.openai.com/v1",defaultModelId:"gpt-4",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://platform.openai.com/api-keys",setupGuideUrl:"https://docs.browseros.com/bring-your-own-keys/openai"},{id:"openai-compatible",name:"OpenAI Compatible",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:128e3},{id:"anthropic",name:"Anthropic",defaultBaseUrl:"https://api.anthropic.com/v1",defaultModelId:"claude-3-5-sonnet-20241022",supportsImages:!0,contextWindow:2e5,apiKeyUrl:"https://console.anthropic.com/settings/keys",setupGuideUrl:"https://docs.browseros.com/bring-your-own-keys/claude"},{id:"google",name:"Gemini",defaultBaseUrl:"https://generativelanguage.googleapis.com/v1beta",defaultModelId:"gemini-1.5-pro",supportsImages:!0,contextWindow:1e6,apiKeyUrl:"https://aistudio.google.com/app/apikey",setupGuideUrl:"https://docs.browseros.com/bring-your-own-keys/gemini"},{id:"ollama",name:"Ollama",defaultBaseUrl:"http://localhost:11434/v1",defaultModelId:"llama3.2",supportsImages:!1,contextWindow:128e3,setupGuideUrl:"https://docs.browseros.com/local-LLMs/ollama"},{id:"openrouter",name:"OpenRouter",defaultBaseUrl:"https://openrouter.ai/api/v1",defaultModelId:"openai/gpt-4-turbo",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://openrouter.ai/keys",setupGuideUrl:"https://docs.browseros.com/bring-your-own-keys/openrouter"},{id:"lmstudio",name:"LM Studio",defaultBaseUrl:"http://localhost:1234/v1",defaultModelId:"local-model",supportsImages:!1,contextWindow:32e3,setupGuideUrl:"https://docs.browseros.com/local-LLMs/lm-studio"},{id:"azure",name:"Azure",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:128e3,apiKeyUrl:"https://portal.azure.com/#view/Microsoft_Azure_ProjectOxford/CognitiveServicesHub/~/OpenAI"},{id:"bedrock",name:"AWS Bedrock",defaultBaseUrl:"",defaultModelId:"",supportsImages:!0,contextWindow:2e5,setupGuideUrl:"https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html"}],Gi=[{value:"anthropic",label:"Anthropic"},{value:"openai",label:"OpenAI"},{value:"openai-compatible",label:"OpenAI Compatible"},{value:"google",label:"Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"azure",label:"Azure"},{value:"ollama",label:"Ollama"},{value:"lmstudio",label:"LM Studio"},{value:"bedrock",label:"AWS Bedrock"},{value:"browseros",label:"BrowserOS"}],Yi=e=>_n.find(s=>s.id===e),Zi={anthropic:"https://api.anthropic.com/v1",openai:"https://api.openai.com/v1","openai-compatible":"",google:"https://generativelanguage.googleapis.com/v1beta",openrouter:"https://openrouter.ai/api/v1",azure:"",ollama:"http://localhost:11434/v1",lmstudio:"http://localhost:1234/v1",bedrock:"",browseros:""},xt=e=>Zi[e]||"",Xi={anthropic:[{modelId:"claude-sonnet-4-5-20250929",contextLength:2e5},{modelId:"claude-sonnet-4-20250514",contextLength:2e5},{modelId:"claude-opus-4-20250514",contextLength:2e5},{modelId:"claude-3-7-sonnet-20250219",contextLength:2e5},{modelId:"claude-3-5-haiku-20241022",contextLength:2e5}],openai:[{modelId:"gpt-5",contextLength:4e5},{modelId:"gpt-5-mini",contextLength:4e5},{modelId:"gpt-5-nano",contextLength:4e5},{modelId:"gpt-4.1",contextLength:1e6},{modelId:"gpt-4.1-mini",contextLength:1e6},{modelId:"o4-mini",contextLength:2e5},{modelId:"o3-mini",contextLength:2e5},{modelId:"gpt-4o",contextLength:128e3},{modelId:"gpt-4o-mini",contextLength:128e3}],"openai-compatible":[],google:[{modelId:"gemini-2.5-flash",contextLength:1048576},{modelId:"gemini-2.5-pro",contextLength:1048576}],openrouter:[{modelId:"google/gemini-2.5-flash",contextLength:1048576},{modelId:"openai/gpt-4o",contextLength:128e3},{modelId:"anthropic/claude-sonnet-4.5",contextLength:1e6},{modelId:"anthropic/claude-sonnet-4",contextLength:1e6},{modelId:"anthropic/claude-3.7-sonnet",contextLength:2e5},{modelId:"openai/gpt-oss-120b",contextLength:128e3},{modelId:"openai/gpt-oss-20b",contextLength:128e3},{modelId:"qwen/qwen3-14b",contextLength:131072},{modelId:"qwen/qwen3-8b",contextLength:131072}],azure:[],ollama:[{modelId:"qwen3:4b",contextLength:262144},{modelId:"qwen3:8b",contextLength:40960},{modelId:"qwen3:14b",contextLength:40960},{modelId:"gpt-oss:20b",contextLength:128e3},{modelId:"gpt-oss:120b",contextLength:128e3}],lmstudio:[{modelId:"openai/gpt-oss-20b",contextLength:128e3},{modelId:"openai/gpt-oss-120b",contextLength:128e3},{modelId:"qwen/qwen3-vl-8b",contextLength:131072}],bedrock:[],browseros:[]};function In(e){return Xi[e]||[]}function Ji(e){const r=In(e).map(n=>n.modelId);return r.length>0?[...r,"custom"]:["custom"]}function Qi(e,s){return In(e).find(o=>o.modelId===s)?.contextLength}const el=so(["anthropic","openai","openai-compatible","google","openrouter","azure","ollama","lmstudio","bedrock","browseros"]),tl=pr({type:el,name:xe().min(1,"Provider name is required").max(50),baseUrl:xe().optional(),modelId:xe().min(1,"Model ID is required"),apiKey:xe().optional(),supportsImages:no(),contextWindow:Vr().int().min(1e3).max(2e6),temperature:Vr().min(0).max(2),resourceName:xe().optional(),accessKeyId:xe().optional(),secretAccessKey:xe().optional(),region:xe().optional(),sessionToken:xe().optional()}).superRefine((e,s)=>{e.type==="azure"?(!e.resourceName&&!e.baseUrl&&s.addIssue({code:ze.custom,message:"Either Resource Name or Base URL is required",path:["resourceName"]}),e.apiKey||s.addIssue({code:ze.custom,message:"API Key is required for Azure",path:["apiKey"]})):e.type==="bedrock"?(e.accessKeyId||s.addIssue({code:ze.custom,message:"Access Key ID is required",path:["accessKeyId"]}),e.secretAccessKey||s.addIssue({code:ze.custom,message:"Secret Access Key is required",path:["secretAccessKey"]}),e.region||s.addIssue({code:ze.custom,message:"Region is required",path:["region"]})):e.baseUrl?/^https?:\/\/.+/.test(e.baseUrl)||s.addIssue({code:ze.custom,message:"Must be a valid URL",path:["baseUrl"]}):s.addIssue({code:ze.custom,message:"Base URL is required",path:["baseUrl"]})}),ss=({open:e,onOpenChange:s,initialValues:r,onSave:n})=>{const[o,a]=d.useState(!1),[i,l]=d.useState(!1),[u,m]=d.useState(null),{supports:x}=br(),b=Gi.filter(S=>S.value==="openai-compatible"?x(jr.OPENAI_COMPATIBLE_SUPPORT):!0),h=Rr({resolver:Dr(tl),defaultValues:{type:r?.type||"openai",name:r?.name||"",baseUrl:r?.baseUrl||xt("openai"),modelId:r?.modelId||"",apiKey:r?.apiKey||"",supportsImages:r?.supportsImages??!1,contextWindow:r?.contextWindow||128e3,temperature:r?.temperature??.2,resourceName:r?.resourceName||"",accessKeyId:r?.accessKeyId||"",secretAccessKey:r?.secretAccessKey||"",region:r?.region||"",sessionToken:r?.sessionToken||""}}),k=h.watch("type"),I=h.watch("modelId"),v=h.watch("apiKey"),C=h.watch("baseUrl"),T=h.watch("resourceName"),y=h.watch("accessKeyId"),p=h.watch("secretAccessKey"),w=h.watch("region"),E=h.watch("sessionToken");d.useEffect(()=>{m(null)},[k,I,v,C,T,y,p,w,E]);const V=Ji(k),U=S=>{h.setValue("type",S);const R=xt(S);R&&h.setValue("baseUrl",R),h.setValue("modelId",""),a(!1)};d.useEffect(()=>{if(I&&I!=="custom"){const S=Qi(k,I);S&&h.setValue("contextWindow",S)}},[I,k,h]);const se=S=>{S==="custom"?(a(!0),h.setValue("modelId","")):(a(!1),h.setValue("modelId",S))};d.useEffect(()=>{r&&(h.reset({type:r.type||"openai",name:r.name||"",baseUrl:r.baseUrl||xt(r.type||"openai"),modelId:r.modelId||"",apiKey:r.apiKey||"",supportsImages:r.supportsImages??!1,contextWindow:r.contextWindow||128e3,temperature:r.temperature??.2,resourceName:r.resourceName||"",accessKeyId:r.accessKeyId||"",secretAccessKey:r.secretAccessKey||"",region:r.region||"",sessionToken:r.sessionToken||""}),a(!1))},[r,h]),d.useEffect(()=>{if(e&&!r){const S="openai";h.reset({type:S,name:"",baseUrl:xt(S),modelId:"",apiKey:"",supportsImages:!1,contextWindow:128e3,temperature:.2,resourceName:"",accessKeyId:"",secretAccessKey:"",region:"",sessionToken:""}),a(!1)}m(null)},[e,r,h]);const D=async S=>{const R=!r?.id,ce={id:r?.id||crypto.randomUUID(),...S,createdAt:r?.createdAt||Date.now(),updatedAt:Date.now()};await n(ce),R&&yt(So,{provider_type:S.type,model:S.modelId}),h.reset(),s(!1)},J=()=>I?k==="azure"?!!(T||C)&&!!v:k==="bedrock"?!!y&&!!p&&!!w:!(!C||!["ollama","lmstudio"].includes(k)&&!v):!1,G=async()=>{l(!0),m(null);try{const S=await vs(),R=h.getValues(),ce=await Fs({id:"test",type:R.type,name:R.name||"Test",baseUrl:R.baseUrl,modelId:R.modelId,apiKey:R.apiKey,supportsImages:R.supportsImages,contextWindow:R.contextWindow,temperature:R.temperature,createdAt:Date.now(),updatedAt:Date.now(),resourceName:R.resourceName,accessKeyId:R.accessKeyId,secretAccessKey:R.secretAccessKey,region:R.region,sessionToken:R.sessionToken},S);m(ce)}catch(S){m({success:!1,message:S instanceof Error?S.message:"Test failed"})}finally{l(!1)}},M=Yi(k),F=M?.setupGuideUrl,B=M?.name,W=S=>{S.preventDefault(),F&&chrome.tabs.create({url:F})},H=()=>k==="azure"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[t.jsx(oe,{control:h.control,name:"resourceName",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Resource Name *"}),t.jsx(re,{children:t.jsx(he,{placeholder:"your-resource-name",...S})}),t.jsx(Le,{children:"Azure OpenAI resource name"}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"baseUrl",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Base URL Override"}),t.jsx(re,{children:t.jsx(he,{placeholder:"Optional custom URL",...S})}),t.jsx(Le,{children:"Overrides resource name if set"}),t.jsx(ue,{})]})})]}),t.jsx(oe,{control:h.control,name:"apiKey",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"API Key *"}),t.jsx(re,{children:t.jsx(he,{type:"password",placeholder:"Enter your Azure API key",...S})}),t.jsx(ue,{})]})})]}):k==="bedrock"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[t.jsx(oe,{control:h.control,name:"accessKeyId",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Access Key ID *"}),t.jsx(re,{children:t.jsx(he,{placeholder:"AKIA...",...S})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"secretAccessKey",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Secret Access Key *"}),t.jsx(re,{children:t.jsx(he,{type:"password",placeholder:"Enter your secret access key",...S})}),t.jsx(ue,{})]})})]}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[t.jsx(oe,{control:h.control,name:"region",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Region *"}),t.jsx(re,{children:t.jsx(he,{placeholder:"us-east-1",...S})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"sessionToken",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Session Token"}),t.jsx(re,{children:t.jsx(he,{type:"password",placeholder:"Optional (for STS credentials)",...S})}),t.jsx(Le,{children:"Required for temporary credentials"}),t.jsx(ue,{})]})})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(oe,{control:h.control,name:"baseUrl",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Base URL *"}),t.jsx(re,{children:t.jsx(he,{placeholder:"https://api.openai.com/v1",...S})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"apiKey",render:({field:S})=>{const R=["ollama","lmstudio"].includes(k);return t.jsxs(ae,{children:[t.jsxs(ie,{children:["API Key",R?"":" *"]}),t.jsx(re,{children:t.jsx(he,{type:"password",placeholder:R?"Enter your API key (optional)":"Enter your API key",...S})}),t.jsxs(Le,{children:["Your API key is encrypted and stored locally."," ",F&&t.jsxs("a",{href:F,onClick:W,className:"inline-flex cursor-pointer items-center gap-1 text-primary hover:underline",children:[t.jsx(Cs,{className:"h-3 w-3"}),B," setup guide"]})]}),t.jsx(ue,{})]})}})]});return t.jsx(Tt,{open:e,onOpenChange:s,children:t.jsxs(Rt,{className:"sm:max-w-2xl",children:[t.jsxs(Dt,{children:[t.jsx(Mt,{children:r?.id?"Edit Provider":"Configure New Provider"}),t.jsx(Lt,{children:r?.id?"Update your LLM provider configuration.":"Add a new LLM provider configuration with API key and model settings."})]}),t.jsx(Mr,{...h,children:t.jsxs("form",{onSubmit:h.handleSubmit(D),className:"space-y-5",children:[t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[t.jsx(oe,{control:h.control,name:"type",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Provider Type *"}),t.jsxs(rr,{onValueChange:R=>U(R),value:S.value,children:[t.jsx(re,{children:t.jsx(nr,{className:"w-full",children:t.jsx(sr,{placeholder:"Select provider type"})})}),t.jsx(or,{children:b.map(R=>t.jsx(ar,{value:R.value,children:R.label},R.value))})]}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"name",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Provider Name *"}),t.jsx(re,{children:t.jsx(he,{placeholder:"e.g., Work OpenAI",...S})}),t.jsx(ue,{})]})})]}),H(),t.jsx(oe,{control:h.control,name:"modelId",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Model *"}),o||V.length===1?t.jsxs(t.Fragment,{children:[t.jsx(re,{children:t.jsx(he,{placeholder:k==="azure"?"Enter your deployment name":k==="bedrock"?"e.g., anthropic.claude-3-5-sonnet-20241022-v2:0":"Enter custom model ID",...S})}),V.length>1&&t.jsx(Z,{type:"button",variant:"link",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>a(!1),children:"← Back to model list"})]}):t.jsxs(rr,{onValueChange:se,value:S.value,children:[t.jsx(re,{children:t.jsx(nr,{className:"w-full",children:t.jsx(sr,{placeholder:"Select a model"})})}),t.jsx(or,{children:V.map(R=>t.jsx(ar,{value:R,children:R==="custom"?"+ Custom model":R},R))})]}),t.jsx(ue,{})]})}),t.jsxs("div",{className:"space-y-4 border-border border-t pt-4",children:[t.jsx("h4",{className:"font-medium text-sm",children:"Model Configuration"}),t.jsx(oe,{control:h.control,name:"supportsImages",render:({field:S})=>t.jsxs(ae,{className:"flex items-center gap-2 space-y-0",children:[t.jsx(re,{children:t.jsx(Vo,{checked:S.value,onCheckedChange:S.onChange})}),t.jsx(ie,{className:"font-normal",children:"Supports Images"})]})}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[t.jsx(oe,{control:h.control,name:"contextWindow",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Context Window Size"}),t.jsx(re,{children:t.jsx(he,{type:"number",...S,onChange:R=>S.onChange(Number(R.target.value))})}),t.jsx(Le,{children:"Auto-filled based on model"}),t.jsx(ue,{})]})}),t.jsx(oe,{control:h.control,name:"temperature",render:({field:S})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Temperature (0-2)"}),t.jsx(re,{children:t.jsx(he,{type:"number",step:"0.1",min:"0",max:"2",...S,onChange:R=>S.onChange(Number(R.target.value))})}),t.jsx(Le,{children:"Controls response randomness"}),t.jsx(ue,{})]})})]})]}),u&&t.jsxs("div",{className:`flex items-center gap-2 rounded-lg border p-3 text-sm ${u.success?"border-green-200 bg-green-50 text-green-700 dark:border-green-800 dark:bg-green-950 dark:text-green-300":"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-950 dark:text-red-300"}`,children:[u.success?t.jsx(oo,{className:"h-4 w-4 shrink-0"}):t.jsx(wo,{className:"h-4 w-4 shrink-0"}),t.jsx("span",{className:"flex-1",children:u.message}),u.responseTime&&t.jsxs("span",{className:"text-xs opacity-70",children:[u.responseTime,"ms"]})]}),t.jsxs(gr,{className:"gap-3",children:[t.jsx(Z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsxs(Z,{type:"button",variant:"outline",onClick:G,disabled:!J()||i,children:[i&&t.jsx(Oe,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Testing...":"Test"]}),t.jsx(Z,{type:"submit",disabled:i,children:r?.id?"Update":"Save"})]})]})})]})})},rl=({template:e,onUseTemplate:s})=>t.jsxs("button",{type:"button",onClick:()=>s(e),className:"group flex w-full items-center justify-between rounded-lg border border-border bg-background p-4 text-left transition-all hover:border-[var(--accent-blue)] hover:shadow-md",children:[t.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground group-hover:text-[var(--accent-blue)]",children:[t.jsx(xs,{type:e.id,size:28}),t.jsx("span",{className:"font-medium text-foreground",children:e.name})]}),t.jsx(Vs,{variant:"outline",className:"rounded-md px-3 py-1 transition-colors group-hover:border-[var(--accent-blue)] group-hover:text-[var(--accent-blue)]",children:"USE"})]}),sl=({onUseTemplate:e})=>{const{supports:s}=br(),r=_n.filter(n=>n.id==="openai-compatible"?s(jr.OPENAI_COMPATIBLE_SUPPORT):!0);return t.jsx(xr,{defaultOpen:!0,className:"group/collapsible",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[t.jsxs(vr,{className:"mb-4 flex w-full items-center justify-between text-left",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Quick provider templates"}),t.jsxs("p",{className:"text-muted-foreground text-sm",children:[r.length," templates available"]})]}),t.jsx(mt,{className:K("h-5 w-5 transition-transform","group-data-[state=open]/collapsible:rotate-180")})]}),t.jsx(yr,{children:t.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:r.map(n=>t.jsx(rl,{template:n,onUseTemplate:e},n.id))})})]})})},ns=()=>{const{providers:e,defaultProviderId:s,saveProvider:r,setDefaultProvider:n,deleteProvider:o}=No(),[a,i]=d.useState(!1),[l,u]=d.useState(!1),[m,x]=d.useState(),[b,h]=d.useState(null),[k,I]=d.useState(null),[v,C]=d.useState(null),T=()=>{x(void 0),i(!0)},y=D=>{x({type:D.id,name:D.name,baseUrl:D.defaultBaseUrl,modelId:D.defaultModelId,supportsImages:D.supportsImages,contextWindow:D.contextWindow,temperature:.2}),i(!0)},p=D=>{h(D),u(!0)},w=D=>{I(D)},E=async()=>{k&&(await o(k.id),I(null))},V=async D=>{await r(D)},U=D=>{n(D)},se=async D=>{C(D.id);try{const J=await vs(),G=await Fs(D,J);G.success?We.success("Test Successful",{description:t.jsx("span",{className:"text-green-600 text-sm dark:text-green-400",children:G.message}),duration:3e3}):We.error("Test Failed",{description:t.jsx("span",{className:"text-red-600 text-sm dark:text-red-400",children:G.message}),duration:3e3})}catch(J){We.error("Test Failed",{description:t.jsx("span",{className:"text-red-600 text-sm dark:text-red-400",children:J instanceof Error?J.message:"Unknown error"}),duration:3e3})}C(null)};return t.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[t.jsx(Ni,{providers:e,defaultProviderId:s,onDefaultProviderChange:n,onAddProvider:T}),t.jsx(sl,{onUseTemplate:y}),t.jsx(Da,{providers:e,selectedProviderId:s,testingProviderId:v,onSelectProvider:U,onTestProvider:se,onEditProvider:p,onDeleteProvider:w}),t.jsx(ss,{open:a,onOpenChange:i,initialValues:m,onSave:V}),t.jsx(ss,{open:l,onOpenChange:u,initialValues:b??void 0,onSave:V}),t.jsx(bt,{open:!!k,onOpenChange:D=>!D&&I(null),children:t.jsxs(jt,{children:[t.jsxs(wt,{children:[t.jsx(Nt,{children:"Delete Provider"}),t.jsxs(Ct,{children:['Are you sure you want to delete "',k?.name,'"? This action cannot be undone.']})]}),t.jsxs(St,{children:[t.jsx(It,{children:"Cancel"}),t.jsx(_t,{onClick:E,children:"Delete"})]})]})})]})};function nl({className:e,...s}){return t.jsx("textarea",{"data-slot":"textarea",className:K("field-sizing-content flex min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none transition-[color,box-shadow] placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:border-destructive aria-invalid:ring-destructive/20 md:text-sm dark:bg-input/30 dark:aria-invalid:ring-destructive/40",e),...s})}const ol=pr({name:xe().min(1,"Server name is required"),url:xe().url("Please enter a valid URL"),description:xe().optional()}),al=({open:e,onOpenChange:s,onAddServer:r})=>{const n=Rr({resolver:Dr(ol),defaultValues:{name:"",url:"",description:""}}),o=i=>{i||n.reset(),s(i)},a=i=>{r({name:i.name,url:i.url,description:i.description??""}),n.reset(),s(!1)};return t.jsx(Tt,{open:e,onOpenChange:o,children:t.jsxs(Rt,{className:"max-w-md",children:[t.jsxs(Dt,{children:[t.jsx(Mt,{children:"Add Custom MCP Server"}),t.jsx(Lt,{children:"Configure your custom MCP server connection"})]}),t.jsx(Mr,{...n,children:t.jsxs("form",{onSubmit:n.handleSubmit(a),className:"space-y-4",children:[t.jsx(oe,{control:n.control,name:"name",render:({field:i})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Server Name"}),t.jsx(re,{children:t.jsx(he,{placeholder:"My Custom MCP",...i})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:n.control,name:"url",render:({field:i})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Server URL"}),t.jsx(Le,{children:"(only supports HTTP)"}),t.jsx(re,{children:t.jsx(he,{type:"url",placeholder:"http://mcp.example.com",...i})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:n.control,name:"description",render:({field:i})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Description (Optional)"}),t.jsx(re,{children:t.jsx(nl,{placeholder:"Describe what this server does...",rows:3,className:"resize-none",...i})}),t.jsx(ue,{})]})}),t.jsxs(gr,{children:[t.jsx(Z,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),t.jsx(Z,{type:"submit",className:"bg-[var(--accent-blue)] text-white hover:bg-[var(--accent-blue-bright)]",children:"Add Server"})]})]})})]})})},il=({open:e,onOpenChange:s,serversList:r,onAddServer:n})=>{const o=a=>{n(a),s(!1)};return t.jsx(Tt,{open:e,onOpenChange:s,children:t.jsxs(Rt,{className:"max-w-md",children:[t.jsxs(Dt,{children:[t.jsx(Mt,{children:"Enable built-in MCP Server"}),t.jsx(Lt,{children:"Select a built-in MCP server to enable"})]}),t.jsx("div",{className:"styled-scrollbar max-h-[400px] w-full space-y-2 overflow-y-auto",children:r?.map(a=>{const{name:i,description:l}=a;return t.jsxs(Z,{variant:"outline",onClick:()=>o(a),className:"group h-auto w-full items-center gap-3 p-3 hover:border-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/5",children:[t.jsx(rt,{className:"h-5 w-5 shrink-0 text-muted-foreground"}),t.jsxs("div",{className:"flex w-[calc(100%-64px)] flex-1 flex-col items-start gap-1",children:[t.jsx("span",{className:"font-medium",children:i}),l&&t.jsx("p",{className:"line-clamp-1 w-full text-ellipsis text-left text-muted-foreground text-xs",children:l})]}),t.jsx(Ge,{className:"h-4 w-4 shrink-0 text-muted-foreground"})]},i)})??null})]})})},ll=({availableServers:e,onAddServer:s,isLoading:r})=>{const[n,o]=d.useState(!1);return t.jsx(xr,{open:n,onOpenChange:o,children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[t.jsxs(vr,{className:"flex w-full cursor-pointer items-center justify-between hover:opacity-50",children:[t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Built-in Servers"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:r?"Loading...":`${e?.length} servers available`})]}),t.jsx(mt,{className:`h-5 w-5 text-muted-foreground transition-transform duration-200 ${n?"rotate-180":""}`})]}),t.jsx(yr,{className:"pt-4",children:r?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(Oe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:e?.map(a=>{const{name:i,description:l}=a;return t.jsxs(Z,{variant:"outline",onClick:()=>s(a),className:"group h-auto flex-col items-start gap-2 p-4 hover:border-[var(--accent-blue)]",children:[t.jsxs("div",{className:"flex w-full items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(rt,{className:"h-5 w-5 text-muted-foreground transition-colors group-hover:text-[var(--accent-blue)]"}),t.jsx("span",{className:"font-medium",children:i})]}),t.jsx(Ge,{className:"h-4 w-4 text-muted-foreground transition-colors group-hover:text-[var(--accent-blue)]"})]}),l&&t.jsx("p",{className:"line-clamp-1 max-w-48 text-ellipsis text-left text-muted-foreground text-xs",children:l})]},i)})??null})})]})})},os=zo?e=>{e()}:O.startTransition,cl=e=>{const[,s]=d.useState({}),r=d.useRef(!1),n=d.useRef(e),o=d.useRef({data:!1,error:!1,isValidating:!1}),a=d.useCallback(i=>{let l=!1;const u=n.current;for(const m in i)if(Object.prototype.hasOwnProperty.call(i,m)){const x=m;u[x]!==i[x]&&(u[x]=i[x],o.current[x]&&(l=!0))}l&&!r.current&&s({})},[]);return Ss(()=>(r.current=!1,()=>{r.current=!0})),[n,o.current,a]},dl=()=>(e,s,r={})=>{const{mutate:n}=$o(),o=d.useRef(e),a=d.useRef(s),i=d.useRef(r),l=d.useRef(0),[u,m,x]=cl({data:gt,error:gt,isMutating:!1}),b=u.current,h=d.useCallback(async(I,v)=>{const[C,T]=Wo(o.current);if(!a.current)throw new Error("Can’t trigger the mutation: missing fetcher.");if(!C)throw new Error("Can’t trigger the mutation: missing key.");const y=qt(qt({populateCache:!1,throwOnError:!0},i.current),v),p=Ur();l.current=p,x({isMutating:!0});try{const w=await n(C,a.current(T,{arg:I}),qt(y,{throwOnError:!0}));return l.current<=p&&(os(()=>x({data:w,isMutating:!1,error:void 0})),y.onSuccess==null||y.onSuccess.call(y,w,C,y)),w}catch(w){if(l.current<=p&&(os(()=>x({error:w,isMutating:!1})),y.onError==null||y.onError.call(y,w,C,y),y.throwOnError))throw w}},[]),k=d.useCallback(()=>{l.current=Ur(),x({data:gt,error:gt,isMutating:!1})},[]);return Ss(()=>{o.current=e,a.current=s,i.current=r}),{trigger:h,reset:k,get data(){return m.data=!0,b.data},get error(){return m.error=!0,b.error},get isMutating(){return m.isMutating=!0,b.isMutating}}},An=Ko(wr,dl),ul=async(e,{arg:s})=>{const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverName:s.serverName})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to add server")}return r.json()},fl=()=>{const{baseUrl:e}=Ot();return An(e?`${e}/klavis/servers/add`:null,ul)},ml=async([e])=>await(await fetch(`${e}/klavis/servers`)).json(),hl=()=>{const{baseUrl:e}=Ot();return wr(e?[e,"klavis/servers"]:null,ml,{keepPreviousData:!0})},pl=async([e])=>await(await fetch(`${e}/klavis/user-integrations`)).json(),gl=()=>{const{baseUrl:e}=Ot();return wr(e?[e,"klavis/user-integrations"]:null,pl,{keepPreviousData:!0,revalidateOnFocus:!0})},xl=async(e,{arg:s})=>{const r=await fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverName:s.serverName})});if(!r.ok){const n=await r.json();throw new Error(n.error||"Failed to remove server")}return r.json()},vl=()=>{const{baseUrl:e}=Ot();return An(e?`${e}/klavis/servers/remove`:null,xl)},vt=(e,s)=>{We.error(`Failed to add MCP Server: ${e}`),ps.captureException(s)},as=(e,s)=>{We.error(`Failed to remove MCP Server: ${e}`),ps.captureException(s)},yl=()=>{const{servers:e,addServer:s,removeServer:r}=Co(),[n,o]=d.useState(!1),[a,i]=d.useState(!1),[l,u]=d.useState(null),{trigger:m}=fl(),{trigger:x}=vl(),{data:b}=hl(),{data:h,isLoading:k}=gl(),I=async p=>{try{const E=(await m({serverName:p})).oauthUrl;if(!E){vt(p,"No auth URL returned");return}window.open(E,"_blank")?.focus()}catch(w){vt(p,w)}},v=async({name:p,description:w})=>{try{const V=(await m({serverName:p})).oauthUrl;if(!V){vt(p,"No auth URL returned");return}window.open(V,"_blank")?.focus(),s({id:Date.now().toString(),displayName:`${p} MCP`,type:"managed",managedServerName:p,managedServerDescription:w})}catch(E){vt(p,E)}},C=async({id:p,name:w})=>{u(p);try{(await x({serverName:w})).success?r(p):as(w,"Success not returned from server")}catch(E){as(w,E)}finally{u(null)}},T=p=>{s({id:Date.now().toString(),displayName:p.name,type:"custom",config:{url:p.url,description:p.description}})},y=b?.servers.filter(p=>{const w=p.name;return!e.find(E=>E.managedServerName===w)});return t.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[t.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-blue)]/10",children:t.jsx(rt,{className:"h-6 w-6 text-[var(--accent-blue)]"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"MCP Servers"}),t.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Connect BrowserOS assistant to MCP servers to send email, schedule calendar events, write docs, and more"}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(Z,{variant:"outline",onClick:()=>o(!0),className:"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/20",children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsx("span",{children:"Enable built-in MCP"})]}),t.jsxs(Z,{variant:"outline",onClick:()=>i(!0),children:[t.jsx(Ge,{className:"h-4 w-4"}),t.jsx("span",{children:"Add Custom MCP"})]})]})]})]})}),e.length>0&&t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[t.jsx("h3",{className:"mb-4 font-semibold text-lg",children:"Your MCP Servers"}),t.jsx("div",{className:"space-y-3",children:e.map(p=>t.jsxs("div",{className:"flex items-center gap-4 rounded-lg border border-border bg-background p-4 transition-all hover:border-[var(--accent-blue)]/50 hover:shadow-sm",children:[t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-[var(--accent-blue)]/10",children:t.jsx(rt,{className:"h-5 w-5 text-[var(--accent-blue)]"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[t.jsx("span",{className:"font-semibold",children:p.displayName}),t.jsx("span",{className:`rounded px-2 py-0.5 font-medium text-xs ${p.type==="managed"?"bg-[var(--accent-blue)]/10 text-[var(--accent-blue)]":"bg-muted text-muted-foreground"}`,children:p.type==="managed"?"Built-in":"Custom"})]}),t.jsx("p",{className:"text-muted-foreground text-sm",children:p.managedServerDescription||p.config?.description||p.config?.url})]}),p.type==="managed"&&(k?t.jsx(Oe,{className:"h-4 w-4 animate-spin text-muted-foreground"}):h?.integrations?.find(w=>w.name===p.managedServerName)?.is_authenticated?t.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-green-500/10 px-2 py-1 font-medium text-green-600 text-xs",children:[t.jsx(ft,{className:"h-3 w-3"}),"Authenticated"]}):t.jsx(Z,{variant:"outline",size:"sm",onClick:()=>p.managedServerName&&I(p.managedServerName),children:"Authenticate"})),t.jsx(Z,{variant:"ghost",size:"icon",disabled:l===p.id,onClick:()=>{p.type==="managed"&&p.managedServerName?C({id:p.id,name:p.managedServerName}):r(p.id)},className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive",title:"Remove server",children:l===p.id?t.jsx(Oe,{className:"h-4 w-4 animate-spin"}):t.jsx(Sr,{className:"h-4 w-4"})})]},p.id))})]}),t.jsx(ll,{availableServers:y,onAddServer:v,isLoading:!1}),t.jsx(il,{open:n,onOpenChange:o,serversList:y,onAddServer:v}),t.jsx(al,{open:a,onOpenChange:i,onAddServer:T})]})},bl=[{name:"BrowserOS AI",to:"/ai",icon:Uo,enabled:!0},{name:"LLM Chat & Hub",to:"/chat",icon:Ns,enabled:!0},{name:"Search Engines",to:"/search",icon:ao,enabled:!1},{name:"Connect with MCP",to:"/connect-mcp",icon:sa,enabled:!0,feature:jr.MANAGED_MCP_SUPPORT},{name:"BrowserOS MCP",to:"/mcp",icon:rt,enabled:!0},{name:"Revisit Onboarding",to:chrome.runtime.getURL("onboarding.html"),icon:oa,target:"_blank",enabled:!0}],jl=()=>{const e=io(),[s,r]=d.useState(!1),{supports:n}=br();return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("div",{className:"sticky top-0 z-40 flex items-center justify-between border-border border-b bg-background px-4 py-3 lg:hidden",children:[t.jsx("h1",{className:"font-semibold text-lg",children:"Settings"}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("button",{type:"button",onClick:()=>r(!s),className:"rounded-lg p-2 transition-colors hover:bg-accent","aria-label":"Toggle menu",children:s?t.jsx(gs,{className:"h-5 w-5"}):t.jsx(ta,{className:"h-5 w-5"})})})]}),s&&t.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>r(!1),"aria-label":"Close sidebar",role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),r(!1))}}),t.jsxs("div",{className:"flex",children:[t.jsx("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 transform border-border border-r bg-background transition-transform duration-300 lg:sticky lg:top-0 lg:h-screen lg:translate-x-0 ${s?"translate-x-0":"-translate-x-full"}`,children:t.jsxs("div",{className:"flex h-full flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between border-border border-b px-6 py-4",children:[t.jsx("h1",{className:"font-semibold text-xl",children:"Settings"}),t.jsx(Bo,{})]}),t.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto px-3 py-4",children:bl.filter(o=>o.enabled&&(!o.feature||n(o.feature))).map(o=>{const a=e.pathname===o.to,i=o.icon;return t.jsxs(lo,{to:o.to,onClick:()=>r(!1),target:o.target,rel:o.target?"noopener noreferrer":void 0,className:`flex items-center gap-3 rounded-lg px-3 py-2.5 font-medium text-sm transition-all ${a?"bg-accent text-accent-foreground shadow-sm":"text-muted-foreground hover:bg-accent/50 hover:text-accent-foreground"}`,children:[t.jsx(i,{className:"h-4 w-4 shrink-0"}),t.jsx("span",{children:o.name})]},o.to)})}),t.jsx("div",{className:"border-border border-t px-3 py-4",children:t.jsxs("a",{href:"https://docs.browseros.com/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-lg px-3 py-2.5 font-medium text-muted-foreground text-sm transition-colors hover:bg-accent/50 hover:text-accent-foreground",children:[t.jsx(co,{className:"h-4 w-4 shrink-0"}),t.jsx("span",{children:"About BrowserOS"})]})})]})}),t.jsx("main",{className:"flex-1 overflow-y-auto",children:t.jsx("div",{className:"mx-auto max-w-5xl overflow-hidden px-4 py-8 sm:px-6 lg:px-8",children:t.jsx(uo,{})})})]})]})},ur=[{name:"ChatGPT",url:"https://chatgpt.com"},{name:"Claude",url:"https://claude.ai"},{name:"Grok",url:"https://grok.com"},{name:"Gemini",url:"https://gemini.google.com"},{name:"Perplexity",url:"https://www.perplexity.ai"}];async function wl(){try{const e=ct(),[s,r]=await Promise.all([e.getPref(qe.THIRD_PARTY_LLM_PROVIDERS),e.getPref(qe.THIRD_PARTY_LLM_SELECTED)]),n=s?.value||[],o=r?.value||0;return n.length===0?{providers:ur,selectedIndex:0}:{providers:n,selectedIndex:o}}catch{return{providers:ur,selectedIndex:0}}}async function Yt(e,s){try{const r=ct(),[n,o]=await Promise.all([r.setPref(qe.THIRD_PARTY_LLM_PROVIDERS,e),r.setPref(qe.THIRD_PARTY_LLM_SELECTED,s)]);return n&&o}catch{return!1}}function Sl(e,s=128){try{const r=e.trim();return r?`https://www.google.com/s2/favicons?domain=${new URL(r.match(/^[a-zA-Z][a-zA-Z0-9+.-]*:/)?r:`https://${r}`).hostname}&sz=${s}`:void 0}catch{return}}function Nl(){const[e,s]=d.useState([]),[r,n]=d.useState(0),[o,a]=d.useState(!0);d.useEffect(()=>{(async()=>{a(!0);try{const x=await wl();s(x.providers),n(x.selectedIndex)}catch{s(ur),n(0)}finally{a(!1)}})()},[]);const i=d.useCallback(async(m,x)=>{const h=x!==void 0&&x>=0?e.map((v,C)=>C===x?m:v):[...e,m],k=e;s(h),await Yt(h,r)||s(k)},[e,r]),l=d.useCallback(async m=>{if(m<0||m>=e.length)return;const x=r;n(m),await Yt(e,m)||n(x)},[e,r]),u=d.useCallback(async m=>{if(e.length<=1)return;const x=e.filter((v,C)=>C!==m);let b=r;r===m?b=0:r>m&&(b=r-1);const h=e,k=r;s(x),n(b),await Yt(x,b)||(s(h),n(k))},[e,r]);return{providers:e,selectedIndex:r,isLoading:o,saveProvider:i,setSelectedIndex:l,deleteProvider:u}}const Cl=pr({name:xe().min(1,"Provider name is required").max(50,"Name must be 50 characters or less"),url:xe().min(1,"URL is required").refine(e=>{try{return new URL(e.startsWith("http")?e:`https://${e}`),!0}catch{return!1}},{message:"Please enter a valid URL"})}),_l=({open:e,onOpenChange:s,initialValues:r,onSave:n})=>{const o=!!r,a=Rr({resolver:Dr(Cl),defaultValues:{name:"",url:""}});d.useEffect(()=>{e&&a.reset(r?{name:r.name,url:r.url}:{name:"",url:""})},[e,r,a]);const i=l=>{let u=l.url.trim();!u.startsWith("http://")&&!u.startsWith("https://")&&(u=`https://${u}`),u.endsWith("/")&&(u=u.slice(0,-1)),n({name:l.name.trim(),url:u}),o||yt(_o,{name:l.name.trim(),url:u}),a.reset(),s(!1)};return t.jsx(Tt,{open:e,onOpenChange:s,children:t.jsxs(Rt,{className:"sm:max-w-md",children:[t.jsxs(Dt,{children:[t.jsx(Mt,{children:o?"Edit Provider":"Add Custom Provider"}),t.jsx(Lt,{children:o?"Update your custom AI chat provider.":"Add a new AI chat provider for quick access."})]}),t.jsx(Mr,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(i),className:"space-y-4",children:[t.jsx(oe,{control:a.control,name:"name",render:({field:l})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"Provider Name"}),t.jsx(re,{children:t.jsx(he,{placeholder:"e.g., DeepSeek",...l})}),t.jsx(ue,{})]})}),t.jsx(oe,{control:a.control,name:"url",render:({field:l})=>t.jsxs(ae,{children:[t.jsx(ie,{children:"URL"}),t.jsx(re,{children:t.jsx(he,{placeholder:"e.g., chat.deepseek.com",...l})}),t.jsx(Le,{children:"The web address of the AI chat service"}),t.jsx(ue,{})]})}),t.jsxs(gr,{className:"gap-2 pt-2",children:[t.jsx(Z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),t.jsx(Z,{type:"submit",children:o?"Update":"Add"})]})]})})]})})},Il=({provider:e,isSelected:s,canDelete:r,onSelect:n,onEdit:o,onDelete:a})=>{const i=d.useMemo(()=>Sl(e.url),[e.url]),l=()=>{s||n()},u=m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l())};return t.jsxs("button",{type:"button",onClick:l,onKeyDown:u,className:K("group flex w-full cursor-pointer items-center gap-4 rounded-xl border p-4 text-left transition-all",s?"border-[var(--accent-blue)] bg-[var(--accent-blue)]/5 shadow-md":"border-border bg-card hover:border-[var(--accent-blue)]/50 hover:shadow-sm"),children:[t.jsx("div",{className:K("flex h-5 w-5 shrink-0 items-center justify-center rounded-full border-2 transition-all",s?"border-[var(--accent-blue)] bg-[var(--accent-blue)]":"border-border"),children:s&&t.jsx(ft,{className:"h-3 w-3 text-white"})}),t.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center overflow-hidden rounded-lg bg-muted",children:i?t.jsx("img",{src:i,alt:`${e.name} icon`,className:"h-full w-full object-cover opacity-60 grayscale"}):t.jsx(Jo,{className:"h-5 w-5 text-muted-foreground"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("span",{className:"mb-0.5 block truncate font-semibold",children:e.name}),t.jsx("p",{className:"truncate text-muted-foreground/70 text-xs",children:e.url})]}),t.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[t.jsx(Z,{variant:"outline",size:"sm",onClick:m=>{m.stopPropagation(),o()},children:"Edit"}),t.jsx(Z,{variant:"ghost",size:"icon-sm",disabled:!r,className:"text-muted-foreground hover:bg-destructive/10 hover:text-destructive disabled:opacity-30",onClick:m=>{m.stopPropagation(),a()},"aria-label":`Remove ${e.name}`,children:t.jsx(Sr,{className:"h-4 w-4"})})]})]})},Al=({providers:e,selectedIndex:s,isLoading:r=!1,onSelectProvider:n,onEditProvider:o,onDeleteProvider:a,onAddProvider:i})=>r?t.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-center gap-3 py-8 text-muted-foreground",children:[t.jsx(Oe,{className:"h-5 w-5 animate-spin"}),t.jsx("span",{children:"Loading providers..."})]})}):e.length===0?t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"font-medium",children:"Configured Providers"}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:i,className:"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/20 hover:text-[var(--accent-blue)]",children:[t.jsx(Ge,{className:"mr-1.5 h-4 w-4"}),"Add provider"]})]}),t.jsx("div",{className:"rounded-lg border border-border border-dashed py-8 text-center",children:t.jsx("p",{className:"text-muted-foreground text-sm",children:"No providers configured yet."})})]}):t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h3",{className:"font-medium",children:"Configured Providers"}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:i,className:"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/20 hover:text-[var(--accent-blue)]",children:[t.jsx(Ge,{className:"mr-1.5 h-4 w-4"}),"Add provider"]})]}),t.jsx("div",{className:"space-y-3",children:e.map((l,u)=>t.jsx(Il,{provider:l,isSelected:u===s,canDelete:e.length>1,onSelect:()=>n(u),onEdit:()=>o(u),onDelete:()=>a(u)},l.url))})]}),kl=()=>t.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-blue)]/10",children:t.jsx(Ns,{className:"h-6 w-6 text-[var(--accent-blue)]"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"LLM Chat & Hub"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"Curate and configure your favourite LLM chat providers"})]})]})}),El=()=>{const{providers:e,selectedIndex:s,isLoading:r,saveProvider:n,setSelectedIndex:o,deleteProvider:a}=Nl(),[i,l]=d.useState(!1),[u,m]=d.useState(null),[x,b]=d.useState(null),h=()=>{m(null),l(!0)},k=p=>{m(p),l(!0)},I=p=>{b(p)},v=async()=>{x!==null&&(await a(x),b(null))},C=async p=>{await n(p,u??void 0)},T=x!==null?e[x]:null,y=u!==null?e[u]:null;return t.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[t.jsx(kl,{}),t.jsx(Al,{providers:e,selectedIndex:s,isLoading:r,onSelectProvider:o,onEditProvider:k,onDeleteProvider:I,onAddProvider:h}),t.jsx(_l,{open:i,onOpenChange:l,initialValues:y,onSave:C}),t.jsx(bt,{open:x!==null,onOpenChange:p=>!p&&b(null),children:t.jsxs(jt,{children:[t.jsxs(wt,{children:[t.jsx(Nt,{children:"Remove Provider"}),t.jsxs(Ct,{children:["Remove ",T?.name," from your LLM chat providers?"]})]}),t.jsxs(St,{children:[t.jsx(It,{children:"Cancel"}),t.jsx(_t,{onClick:v,children:"Remove"})]})]})})]})},{sendMessage:fr}=qo(),Pl="https://docs.browseros.com/browseros-mcp/how-to-guide",Tl=({serverUrl:e,isLoading:s,error:r})=>{const[n,o]=d.useState(!1),a=async()=>{if(e)try{await navigator.clipboard.writeText(e),o(!0),setTimeout(()=>o(!1),2e3)}catch{}};return t.jsx("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-blue)]/10",children:t.jsx(rt,{className:"h-6 w-6 text-[var(--accent-blue)]"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[t.jsx("h2",{className:"font-semibold text-xl",children:"BrowserOS MCP Server"}),t.jsxs("a",{href:Pl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-muted-foreground text-sm transition-colors hover:text-[var(--accent-blue)]",children:["Setup a client",t.jsx(Cs,{className:"h-3.5 w-3.5"})]})]}),t.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Connect BrowserOS to MCP clients like claude code, gemini and others."}),t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[t.jsx("span",{className:"whitespace-nowrap font-medium text-sm",children:"Server URL:"}),t.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[t.jsx("div",{className:"flex-1 rounded-lg border border-border bg-background px-3 py-2 font-mono text-sm sm:max-w-md",children:s?t.jsx("span",{className:"text-muted-foreground",children:"Loading..."}):r?t.jsx("span",{className:"text-destructive",children:r}):e}),t.jsx(Z,{variant:"outline",size:"icon",onClick:a,disabled:!e||s,className:"shrink-0",children:n?t.jsx(ft,{className:"h-4 w-4 text-green-600"}):t.jsx(Io,{className:"h-4 w-4"})})]})]})]})]})})},Rl=({tools:e,isLoading:s,error:r,onRefresh:n})=>{const[o,a]=d.useState(!1);return t.jsx(xr,{open:o,onOpenChange:a,className:"group/collapsible",children:t.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs(vr,{className:"flex flex-1 items-center justify-between text-left",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Available Tools"}),e.length>0&&t.jsxs("p",{className:"text-muted-foreground text-sm",children:[e.length," tools available"]})]}),t.jsx(mt,{className:`h-5 w-5 text-muted-foreground transition-transform duration-200 ${o?"rotate-180":""}`})]}),t.jsx(Z,{variant:"outline",size:"icon",onClick:n,disabled:s,className:"border-[var(--accent-blue)] bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] hover:bg-[var(--accent-blue)]/20 hover:text-[var(--accent-blue)]",title:"Refresh tools",children:s?t.jsx(Oe,{className:"h-4 w-4 animate-spin"}):t.jsx(ys,{className:"h-4 w-4"})})]}),r&&t.jsx("div",{className:"mt-4 rounded-lg border border-destructive/20 bg-destructive/10 px-4 py-3 text-destructive text-sm",children:r}),t.jsx(yr,{className:"pt-4",children:e.length>0&&t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:e.map(i=>t.jsxs("div",{className:"rounded-lg border border-border bg-background p-4 transition-all hover:border-[var(--accent-blue)]/50 hover:shadow-sm",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsx(ca,{className:"h-4 w-4 text-[var(--accent-blue)]"}),t.jsx("span",{className:"font-medium text-sm",children:i.name})]}),i.description&&t.jsx("p",{className:"line-clamp-2 text-muted-foreground text-xs",children:i.description})]},i.name))})})]})})},Dl=ms("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ml({className:e,variant:s,...r}){return t.jsx("div",{"data-slot":"alert",role:"alert",className:K(Dl({variant:s}),e),...r})}function Ll({className:e,...s}){return t.jsx("div",{"data-slot":"alert-title",className:K("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...s})}function Ol({className:e,...s}){return t.jsx("div",{"data-slot":"alert-description",className:K("col-start-2 grid justify-items-start gap-1 text-muted-foreground text-sm [&_p]:leading-relaxed",e),...s})}var zt="Switch",[Fl]=mr(zt),[Vl,Ul]=Fl(zt),kn=d.forwardRef((e,s)=>{const{__scopeSwitch:r,name:n,checked:o,defaultChecked:a,required:i,disabled:l,value:u="on",onCheckedChange:m,form:x,...b}=e,[h,k]=d.useState(null),I=ye(s,p=>k(p)),v=d.useRef(!1),C=h?x||!!h.closest("form"):!0,[T,y]=Zt({prop:o,defaultProp:a??!1,onChange:m,caller:zt});return t.jsxs(Vl,{scope:r,checked:T,disabled:l,children:[t.jsx(ge.button,{type:"button",role:"switch","aria-checked":T,"aria-required":i,"data-state":Rn(T),"data-disabled":l?"":void 0,disabled:l,value:u,...b,ref:I,onClick:fe(e.onClick,p=>{y(w=>!w),C&&(v.current=p.isPropagationStopped(),v.current||p.stopPropagation())})}),C&&t.jsx(Tn,{control:h,bubbles:!v.current,name:n,value:u,checked:T,required:i,disabled:l,form:x,style:{transform:"translateX(-100%)"}})]})});kn.displayName=zt;var En="SwitchThumb",Pn=d.forwardRef((e,s)=>{const{__scopeSwitch:r,...n}=e,o=Ul(En,r);return t.jsx(ge.span,{"data-state":Rn(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:s})});Pn.displayName=En;var Bl="SwitchBubbleInput",Tn=d.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:n=!0,...o},a)=>{const i=d.useRef(null),l=ye(i,a),u=js(r),m=Ho(s);return d.useEffect(()=>{const x=i.current;if(!x)return;const b=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(b,"checked").set;if(u!==r&&k){const I=new Event("click",{bubbles:n});k.call(x,r),x.dispatchEvent(I)}},[u,r,n]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:l,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Tn.displayName=Bl;function Rn(e){return e?"checked":"unchecked"}var Hl=kn,Kl=Pn;function zl({className:e,...s}){return t.jsx(Hl,{"data-slot":"switch",className:K("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-xs outline-none transition-colors focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,children:t.jsx(Kl,{"data-slot":"switch-thumb",className:K("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}const $l=6e4,is=2e3,Wl=15e3,ql=({onServerRestart:e})=>{const[s,r]=d.useState(!1),[n,o]=d.useState(!0),[a,i]=d.useState(!1),[l,u]=d.useState("Restarting server..."),[m,x]=d.useState(null),[b,h]=d.useState(null);d.useEffect(()=>{(async()=>{try{const E=await ct().getPref(qe.ALLOW_REMOTE_MCP);r(E?.value===!0)}catch{}finally{o(!1)}})()},[]);const k=d.useCallback(async()=>{try{return(await fr("checkHealth",void 0)).healthy}catch{return!1}},[]),I=d.useCallback(async()=>{const p=Date.now();return new Promise(w=>{const E=async()=>{const V=Date.now()-p;if(V>=$l){w(!1);return}if(V>=Wl&&u("Taking longer than expected..."),await k()){w(!0);return}setTimeout(E,is)};setTimeout(E,is)})},[k]),v=p=>{p?x("enable-remote"):C(!1)},C=async p=>{i(!0),u("Restarting server..."),x(null),h(null);try{if(!await ct().setPref(qe.ALLOW_REMOTE_MCP,p))throw new Error("Failed to update setting");await I()?(r(p),yt(p?ko:Eo),We.success("Server restarted successfully",{description:p?"Remote connections are now enabled":"Remote connections are now disabled"}),e?.()):h("Server did not respond. Please quit and restart the browser, then try again.")}catch(w){h(w instanceof Error?w.message:"Failed to update setting")}finally{i(!1)}},T=()=>{x("restart")},y=async()=>{i(!0),u("Restarting server..."),x(null),h(null);try{await ct().setPref(qe.RESTART_SERVER,!0),await I()?(yt(Po),We.success("Server restarted successfully"),e?.()):h("Server did not respond. Please quit and restart the browser, then try again.")}catch(p){h(p instanceof Error?p.message:"Failed to restart server")}finally{i(!1)}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative rounded-xl border border-border bg-card p-6 shadow-sm transition-all hover:shadow-md",children:[a&&t.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center rounded-xl bg-card/80 backdrop-blur-sm",children:[t.jsx(Oe,{className:"h-8 w-8 animate-spin text-[var(--accent-blue)]"}),t.jsx("p",{className:"mt-3 font-medium text-sm",children:l})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-[var(--accent-blue)]/10",children:t.jsx(Go,{className:"h-6 w-6 text-[var(--accent-blue)]"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"mb-1 font-semibold text-xl",children:"MCP Server Settings"}),t.jsx("p",{className:"mb-6 text-muted-foreground text-sm",children:"Configure local MCP server options"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ws,{htmlFor:"allow-remote",className:"font-medium text-sm",children:"Allow External Access"}),t.jsx("p",{className:"text-muted-foreground text-xs",children:"Allow MCP clients from other devices to connect"})]}),t.jsx(zl,{id:"allow-remote",checked:s,onCheckedChange:v,disabled:n||a})]}),t.jsxs("div",{className:"flex items-center justify-between border-border border-t pt-4",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx("span",{className:"font-medium text-sm",children:"Restart MCP Server"}),t.jsx("p",{className:"text-muted-foreground text-xs",children:"Restart local MCP server"})]}),t.jsxs(Z,{variant:"outline",size:"sm",onClick:T,disabled:n||a,children:[t.jsx(ys,{className:"mr-2 h-4 w-4"}),"Restart"]})]}),b&&t.jsxs(Ml,{variant:"destructive",className:"mt-4 border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950",children:[t.jsx(Ao,{className:"h-4 w-4"}),t.jsxs(Ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Server Error"}),t.jsx("button",{type:"button",onClick:()=>h(null),className:"-mt-1 -mr-1 rounded-sm p-1 opacity-70 transition-opacity hover:opacity-100",children:t.jsx(gs,{className:"h-4 w-4"})})]}),t.jsx(Ol,{children:b})]})]})]})]})]}),t.jsx(bt,{open:m==="enable-remote",onOpenChange:p=>!p&&x(null),children:t.jsxs(jt,{children:[t.jsxs(wt,{children:[t.jsx(Nt,{children:"Allow External Access?"}),t.jsx(Ct,{children:"By default, the MCP server only accepts connections from localhost (127.0.0.1). Enabling this will allow any device on your network to connect. Only enable if you need to connect from another machine and trust your network."})]}),t.jsxs(St,{children:[t.jsx(It,{children:"Cancel"}),t.jsx(_t,{onClick:()=>C(!0),children:"Enable"})]})]})}),t.jsx(bt,{open:m==="restart",onOpenChange:p=>!p&&x(null),children:t.jsxs(jt,{children:[t.jsxs(wt,{children:[t.jsx(Nt,{children:"Restart MCP Server?"}),t.jsx(Ct,{children:"This will restart the local MCP server. It may take 10-30 seconds to complete. Any active connections will be temporarily interrupted."})]}),t.jsxs(St,{children:[t.jsx(It,{children:"Cancel"}),t.jsx(_t,{onClick:y,children:"Restart"})]})]})})]})},Gl=()=>{const[e,s]=d.useState(null),[r,n]=d.useState(!0),[o,a]=d.useState(null),[i,l]=d.useState([]),[u,m]=d.useState(!1),[x,b]=d.useState(null),h=d.useCallback(async()=>{let I=null;n(!0),a(null),b(null);try{I=await To(),s(I),n(!1),m(!0);const v=await fr("fetchMcpTools",void 0);v.error?b(v.error):l(v.tools)}catch(v){const C=v instanceof Error?v.message:"Failed to load";I?b(C):a(C)}finally{n(!1),m(!1)}},[]);d.useEffect(()=>{h()},[h]);const k=async()=>{if(e){m(!0),b(null),l([]);try{const I=await fr("fetchMcpTools",void 0);I.error?b(I.error):l(I.tools)}catch(I){b(I instanceof Error?I.message:"Failed to fetch tools")}finally{m(!1)}}};return t.jsxs("div",{className:"fade-in slide-in-from-bottom-5 animate-in space-y-6 duration-500",children:[t.jsx(Tl,{serverUrl:e,isLoading:r,error:o}),t.jsx(ql,{onServerRestart:h}),t.jsx(Rl,{tools:i,isLoading:u,error:x,onRefresh:k})]})},Yl=()=>t.jsx(fo,{children:t.jsx(mo,{children:t.jsxs(Me,{element:t.jsx(jl,{}),children:[t.jsx(Me,{index:!0,element:t.jsx(ho,{to:"/ai",replace:!0})}),t.jsx(Me,{path:"ai",element:t.jsx(ns,{},"ai")}),t.jsx(Me,{path:"chat",element:t.jsx(El,{})}),t.jsx(Me,{path:"search",element:t.jsx(t.Fragment,{})}),t.jsx(Me,{path:"connect-mcp",element:t.jsx(yl,{})}),t.jsx(Me,{path:"mcp",element:t.jsx(Gl,{})}),t.jsx(Me,{path:"onboarding",element:t.jsx(ns,{},"onboarding")})]})})}),ls=document.getElementById("root");ls&&po.createRoot(ls,go).render(t.jsx(O.StrictMode,{children:t.jsx(xo,{children:t.jsxs(vo,{children:[t.jsx(Yl,{}),t.jsx(yo,{})]})})}));
