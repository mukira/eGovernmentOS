import{B as vr,r as M,g as Sr,q as _r,s as Rr,t as Le}from"./product_logo-C96HwpIU.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"384410028dc6aac75eb61d6b08dc7127d516d4af"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="039924b3-041f-45c9-a6b6-3750dc01d28d",e._sentryDebugIdIdentifier="sentry-dbid-039924b3-041f-45c9-a6b6-3750dc01d28d")})()}catch{}var Tr=(e=>(e.OPENAI_COMPATIBLE_SUPPORT="OPENAI_COMPATIBLE_SUPPORT",e.MANAGED_MCP_SUPPORT="MANAGED_MCP_SUPPORT",e))(Tr||{});const Or={OPENAI_COMPATIBLE_SUPPORT:{minVersion:"0.33.0.1"},MANAGED_MCP_SUPPORT:{minVersion:"0.34.0.0"}};function be(e){const r=e.split(".").map(Number);if(r.length!==4||r.some(Number.isNaN))throw new Error(`Invalid version format: ${e}`);return r}function Ge(e,r){for(let t=0;t<4;t++){if(e[t]<r[t])return-1;if(e[t]>r[t])return 1}return 0}let te=null,ae=!1;const Z={async initialize(){if(!ae){try{const r=await vr.getInstance().getBrowserosVersion();r&&(te=be(r))}catch{}ae=!0}},supports(e){if(!ae)throw new Error("Capabilities.initialize() must be called before supports()");if(!te)return!1;const r=Or[e];if(!r)return!1;if(r.minVersion){const t=be(r.minVersion);if(Ge(te,t)<0)return!1}if(r.maxVersion){const t=be(r.maxVersion);if(Ge(te,t)>=0)return!1}return!0},getOsVersion(){return te?te.join("."):null},isInitialized(){return ae},reset(){te=null,ae=!1}};function St(){const[e,r]=M.useState(!Z.isInitialized()),[t,n]=M.useState(Z.getOsVersion());return M.useEffect(()=>{if(Z.isInitialized()){r(!1),n(Z.getOsVersion());return}let a=!1;async function s(){await Z.initialize(),a||(n(Z.getOsVersion()),r(!1))}return s(),()=>{a=!0}},[]),{supports:a=>Z.isInitialized()?Z.supports(a):!1,isLoading:e,osVersion:t}}const Cr=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Pr=new Map(Cr);class ke extends Error{name="NonError";constructor(r){super(ke._prepareSuperMessage(r))}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const Ir=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Te=new WeakSet,Dr=e=>{Te.add(e);const r=e.toJSON();return Te.delete(e),r},lr=e=>Pr.get(e)??Error,Ve=({from:e,seen:r,to:t,forceEnumerable:n,maxDepth:u,depth:a,useToJSON:s,serialize:f})=>{if(!t)if(Array.isArray(e))t=[];else if(!f&&Je(e)){const g=lr(e.name);t=new g}else t={};if(r.push(e),a>=u)return t;if(s&&typeof e.toJSON=="function"&&!Te.has(e))return Dr(e);const d=g=>Ve({from:g,seen:[...r],forceEnumerable:n,maxDepth:u,depth:a,useToJSON:s,serialize:f});for(const[g,p]of Object.entries(e)){if(p&&p instanceof Uint8Array&&p.constructor.name==="Buffer"){t[g]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){t[g]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){try{t[g]=p}catch{}continue}if(!r.includes(e[g])){a++,t[g]=d(e[g]);continue}t[g]="[Circular]"}}for(const{property:g,enumerable:p}of Ir)typeof e[g]<"u"&&e[g]!==null&&Object.defineProperty(t,g,{value:Je(e[g])?d(e[g]):e[g],enumerable:n?!0:p,configurable:!0,writable:!0});return t};function Nr(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:n=!0}=r;return typeof e=="object"&&e!==null?Ve({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Mr(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(Lr(e)){const n=lr(e.name);return Ve({from:e,seen:[],to:new n,maxDepth:t,depth:0,serialize:!1})}return new ke(e)}function Je(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Lr(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var kr=Object.defineProperty,Vr=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,Fr=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Ke=(e,r,t)=>r in e?kr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Ze=(e,r)=>{for(var t in r||(r={}))Fr.call(r,t)&&Ke(e,t,r[t]);if(Ye)for(var t of Ye(r))$r.call(r,t)&&Ke(e,t,r[t]);return e},Xe=(e,r)=>Vr(e,jr(r)),Ur=(e,r,t)=>new Promise((n,u)=>{var a=d=>{try{f(t.next(d))}catch(g){u(g)}},s=d=>{try{f(t.throw(d))}catch(g){u(g)}},f=d=>d.done?n(d.value):Promise.resolve(d.value).then(a,s);f((t=t.apply(e,r)).next())});function Wr(e){let r,t={};function n(){Object.entries(t).length===0&&(r?.(),r=void 0)}let u=Math.floor(Math.random()*1e4);function a(){return u++}return{sendMessage(s,f,...d){return Ur(this,null,function*(){var g,p,c,b;const h={id:a(),type:s,data:f,timestamp:Date.now()},y=(p=yield(g=e.verifyMessageData)==null?void 0:g.call(e,h))!=null?p:h;(c=e.logger)==null||c.debug(`[messaging] sendMessage {id=${y.id}} ─ᐅ`,y,...d);const v=yield e.sendMessage(y,...d),{res:w,err:P}=v??{err:new Error("No response")};if((b=e.logger)==null||b.debug(`[messaging] sendMessage {id=${y.id}} ᐊ─`,{res:w,err:P}),P!=null)throw Mr(P);return w})},onMessage(s,f){var d,g,p;if(r==null&&((d=e.logger)==null||d.debug(`[messaging] "${s}" initialized the message listener for this context`),r=e.addRootListener(c=>{var b,h;if(typeof c.type!="string"||typeof c.timestamp!="number"){if(e.breakError)return;const w=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(c)}`);throw(b=e.logger)==null||b.error(w),w}(h=e?.logger)==null||h.debug("[messaging] Received message",c);const y=t[c.type];if(y==null)return;const v=y(c);return Promise.resolve(v).then(w=>{var P,m;return(m=(P=e.verifyMessageData)==null?void 0:P.call(e,w))!=null?m:w}).then(w=>{var P;return(P=e?.logger)==null||P.debug(`[messaging] onMessage {id=${c.id}} ─ᐅ`,{res:w}),{res:w}}).catch(w=>{var P;return(P=e?.logger)==null||P.debug(`[messaging] onMessage {id=${c.id}} ─ᐅ`,{err:w}),{err:Nr(w)}})})),t[s]!=null){const c=Error(`[messaging] In this JS context, only one listener can be setup for ${s}`);throw(g=e.logger)==null||g.error(c),c}return t[s]=f,(p=e.logger)==null||p.log(`[messaging] Added listener for ${s}`),()=>{delete t[s],n()}},removeAllListeners(){Object.keys(t).forEach(s=>{delete t[s]}),n()}}}var de={exports:{}},qr=de.exports,Qe;function Br(){return Qe||(Qe=1,(function(e,r){(function(t,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:qr,function(t){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",u=a=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(s).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class f extends WeakMap{constructor(o,x=void 0){super(x),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const d=i=>i&&typeof i=="object"&&typeof i.then=="function",g=(i,o)=>(...x)=>{a.runtime.lastError?i.reject(new Error(a.runtime.lastError.message)):o.singleCallbackArg||x.length<=1&&o.singleCallbackArg!==!1?i.resolve(x[0]):i.resolve(x)},p=i=>i==1?"argument":"arguments",c=(i,o)=>function(l,...R){if(R.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${i}(), got ${R.length}`);if(R.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${i}(), got ${R.length}`);return new Promise((T,L)=>{if(o.fallbackToNoCallback)try{l[i](...R,g({resolve:T,reject:L},o))}catch(A){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),l[i](...R),o.fallbackToNoCallback=!1,o.noCallback=!0,T()}else o.noCallback?(l[i](...R),T()):l[i](...R,g({resolve:T,reject:L},o))})},b=(i,o,x)=>new Proxy(o,{apply(l,R,T){return x.call(R,i,...T)}});let h=Function.call.bind(Object.prototype.hasOwnProperty);const y=(i,o={},x={})=>{let l=Object.create(null),R={has(L,A){return A in i||A in l},get(L,A,O){if(A in l)return l[A];if(!(A in i))return;let S=i[A];if(typeof S=="function")if(typeof o[A]=="function")S=b(i,i[A],o[A]);else if(h(x,A)){let U=c(A,x[A]);S=b(i,i[A],U)}else S=S.bind(i);else if(typeof S=="object"&&S!==null&&(h(o,A)||h(x,A)))S=y(S,o[A],x[A]);else if(h(x,"*"))S=y(S,o[A],x["*"]);else return Object.defineProperty(l,A,{configurable:!0,enumerable:!0,get(){return i[A]},set(U){i[A]=U}}),S;return l[A]=S,S},set(L,A,O,S){return A in l?l[A]=O:i[A]=O,!0},defineProperty(L,A,O){return Reflect.defineProperty(l,A,O)},deleteProperty(L,A){return Reflect.deleteProperty(l,A)}},T=Object.create(i);return new Proxy(T,R)},v=i=>({addListener(o,x,...l){o.addListener(i.get(x),...l)},hasListener(o,x){return o.hasListener(i.get(x))},removeListener(o,x){o.removeListener(i.get(x))}}),w=new f(i=>typeof i!="function"?i:function(x){const l=y(x,{},{getContent:{minArgs:0,maxArgs:0}});i(l)}),P=new f(i=>typeof i!="function"?i:function(x,l,R){let T=!1,L,A=new Promise(K=>{L=function(F){T=!0,K(F)}}),O;try{O=i(x,l,L)}catch(K){O=Promise.reject(K)}const S=O!==!0&&d(O);if(O!==!0&&!S&&!T)return!1;const U=K=>{K.then(F=>{R(F)},F=>{let q;F&&(F instanceof Error||typeof F.message=="string")?q=F.message:q="An unexpected error occurred",R({__mozWebExtensionPolyfillReject__:!0,message:q})}).catch(F=>{console.error("Failed to send onMessage rejected reply",F)})};return U(S?O:A),!0}),m=({reject:i,resolve:o},x)=>{a.runtime.lastError?a.runtime.lastError.message===n?o():i(new Error(a.runtime.lastError.message)):x&&x.__mozWebExtensionPolyfillReject__?i(new Error(x.message)):o(x)},Q=(i,o,x,...l)=>{if(l.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${i}(), got ${l.length}`);if(l.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${i}(), got ${l.length}`);return new Promise((R,T)=>{const L=m.bind(null,{resolve:R,reject:T});l.push(L),x.sendMessage(...l)})},Y={devtools:{network:{onRequestFinished:v(w)}},runtime:{onMessage:v(P),onMessageExternal:v(P),sendMessage:Q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},I={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":I},services:{"*":I},websites:{"*":I}},y(a,Y,s)};t.exports=u(chrome)}else t.exports=globalThis.browser})})(de)),de.exports}var zr=Br();const ge=Sr(zr);function _t(e){return Wr(Xe(Ze({},e),{sendMessage(r,t){if(t==null)return ge.runtime.sendMessage(r);const n=typeof t=="number"?{tabId:t}:t;return ge.tabs.sendMessage(n.tabId,r,n.frameId!=null?{frameId:n.frameId}:void 0)},addRootListener(r){const t=(n,u)=>r(typeof n=="object"?Xe(Ze({},n),{sender:u}):n);return ge.runtime.onMessage.addListener(t),()=>ge.runtime.onMessage.removeListener(t)}}))}var he={exports:{}},Ee={};var er;function Hr(){if(er)return Ee;er=1;var e=_r();function r(c,b){return c===b&&(c!==0||1/c===1/b)||c!==c&&b!==b}var t=typeof Object.is=="function"?Object.is:r,n=e.useState,u=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function f(c,b){var h=b(),y=n({inst:{value:h,getSnapshot:b}}),v=y[0].inst,w=y[1];return a(function(){v.value=h,v.getSnapshot=b,d(v)&&w({inst:v})},[c,h,b]),u(function(){return d(v)&&w({inst:v}),c(function(){d(v)&&w({inst:v})})},[c]),s(h),h}function d(c){var b=c.getSnapshot;c=c.value;try{var h=b();return!t(c,h)}catch{return!0}}function g(c,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return Ee.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Ee}var rr;function Gr(){return rr||(rr=1,he.exports=Hr()),he.exports}var tr=Gr();const cr=0,ur=1,gr=2,nr=3,G=new WeakMap,J=()=>{},V=J(),Oe=Object,E=e=>e===V,B=e=>typeof e=="function",X=(e,r)=>({...e,...r}),mr=e=>B(e.then),we={},me={},je="undefined",le=typeof window!=je,Ce=typeof document!=je,Jr=le&&"Deno"in window,Yr=()=>le&&typeof window.requestAnimationFrame!=je,fr=(e,r)=>{const t=G.get(e);return[()=>!E(r)&&e.get(r)||we,n=>{if(!E(r)){const u=e.get(r);r in me||(me[r]=u),t[5](r,X(u,n),u||we)}},t[6],()=>!E(r)&&r in me?me[r]:!E(r)&&e.get(r)||we]};let Pe=!0;const Kr=()=>Pe,[Ie,De]=le&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[J,J],Zr=()=>{const e=Ce&&document.visibilityState;return E(e)||e!=="hidden"},Xr=e=>(Ce&&document.addEventListener("visibilitychange",e),Ie("focus",e),()=>{Ce&&document.removeEventListener("visibilitychange",e),De("focus",e)}),Qr=e=>{const r=()=>{Pe=!0,e()},t=()=>{Pe=!1};return Ie("online",r),Ie("offline",t),()=>{De("online",r),De("offline",t)}},et={isOnline:Kr,isVisible:Zr},rt={initFocus:Xr,initReconnect:Qr},sr=!Le.useId,ie=!le||Jr,tt=e=>Yr()?window.requestAnimationFrame(e):setTimeout(e,1),ye=ie?M.useEffect:M.useLayoutEffect,ve=typeof navigator<"u"&&navigator.connection,ir=!ie&&ve&&(["slow-2g","2g"].includes(ve.effectiveType)||ve.saveData),fe=new WeakMap,nt=e=>Oe.prototype.toString.call(e),Se=(e,r)=>e===`[object ${r}]`;let st=0;const Ne=e=>{const r=typeof e,t=nt(e),n=Se(t,"Date"),u=Se(t,"RegExp"),a=Se(t,"Object");let s,f;if(Oe(e)===e&&!n&&!u){if(s=fe.get(e),s)return s;if(s=++st+"~",fe.set(e,s),Array.isArray(e)){for(s="@",f=0;f<e.length;f++)s+=Ne(e[f])+",";fe.set(e,s)}if(a){s="#";const d=Oe.keys(e).sort();for(;!E(f=d.pop());)E(e[f])||(s+=f+":"+Ne(e[f])+",");fe.set(e,s)}}else s=n?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return s},Fe=e=>{if(B(e))try{e=e()}catch{e=""}const r=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Ne(e):"",[e,r]};let it=0;const Me=()=>++it;async function dr(...e){const[r,t,n,u]=e,a=X({populateCache:!0,throwOnError:!0},typeof u=="boolean"?{revalidate:u}:u||{});let s=a.populateCache;const f=a.rollbackOnError;let d=a.optimisticData;const g=b=>typeof f=="function"?f(b):f!==!1,p=a.throwOnError;if(B(t)){const b=t,h=[],y=r.keys();for(const v of y)!/^\$(inf|sub)\$/.test(v)&&b(r.get(v)._k)&&h.push(v);return Promise.all(h.map(c))}return c(t);async function c(b){const[h]=Fe(b);if(!h)return;const[y,v]=fr(r,h),[w,P,m,Q]=G.get(r),Y=()=>{const O=w[h];return(B(a.revalidate)?a.revalidate(y().data,b):a.revalidate!==!1)&&(delete m[h],delete Q[h],O&&O[0])?O[0](gr).then(()=>y().data):y().data};if(e.length<3)return Y();let I=n,i,o=!1;const x=Me();P[h]=[x,0];const l=!E(d),R=y(),T=R.data,L=R._c,A=E(L)?T:L;if(l&&(d=B(d)?d(A,T):d,v({data:d,_c:A})),B(I))try{I=I(A)}catch(O){i=O,o=!0}if(I&&mr(I))if(I=await I.catch(O=>{i=O,o=!0}),x!==P[h][0]){if(o)throw i;return I}else o&&l&&g(i)&&(s=!0,v({data:A,_c:V}));if(s&&!o)if(B(s)){const O=s(I,A);v({data:O,error:V,_c:V})}else v({data:I,error:V,_c:V});if(P[h][1]=Me(),Promise.resolve(Y()).then(()=>{v({_c:V})}),o){if(p)throw i;return}return I}}const or=(e,r)=>{for(const t in e)e[t][0]&&e[t][0](r)},ot=(e,r)=>{if(!G.has(e)){const t=X(rt,r),n=Object.create(null),u=dr.bind(V,e);let a=J;const s=Object.create(null),f=(p,c)=>{const b=s[p]||[];return s[p]=b,b.push(c),()=>b.splice(b.indexOf(c),1)},d=(p,c,b)=>{e.set(p,c);const h=s[p];if(h)for(const y of h)y(c,b)},g=()=>{if(!G.has(e)&&(G.set(e,[n,Object.create(null),Object.create(null),Object.create(null),u,d,f]),!ie)){const p=t.initFocus(setTimeout.bind(V,or.bind(V,n,cr))),c=t.initReconnect(setTimeout.bind(V,or.bind(V,n,ur)));a=()=>{p&&p(),c&&c(),G.delete(e)}}};return g(),[e,u,g,a]}return[e,G.get(e)[4]]},at=(e,r,t,n,u)=>{const a=t.errorRetryCount,s=u.retryCount,f=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!E(a)&&s>a||setTimeout(n,f,u)},lt=Rr,[Ar,ct]=ot(new Map),ut=X({onLoadingSlow:J,onSuccess:J,onError:J,onErrorRetry:at,onDiscarded:J,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ir?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:ir?5e3:3e3,compare:lt,isPaused:()=>!1,cache:Ar,mutate:ct,fallback:{}},et),gt=(e,r)=>{const t=X(e,r);if(r){const{use:n,fallback:u}=e,{use:a,fallback:s}=r;n&&a&&(t.use=n.concat(a)),u&&s&&(t.fallback=X(u,s))}return t},mt=M.createContext({}),ft="$inf$",pr=le&&window.__SWR_DEVTOOLS_USE__,dt=pr?window.__SWR_DEVTOOLS_USE__:[],At=()=>{pr&&(window.__SWR_DEVTOOLS_REACT__=Le)},xr=e=>B(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],pt=()=>{const e=M.useContext(mt);return M.useMemo(()=>X(ut,e),[e])},xt=e=>(r,t,n)=>e(r,t&&((...a)=>{const[s]=Fe(r),[,,,f]=G.get(Ar);if(s.startsWith(ft))return t(...a);const d=f[s];return E(d)?t(...a):(delete f[s],d)}),n),bt=dt.concat(xt),ht=e=>function(...t){const n=pt(),[u,a,s]=xr(t),f=gt(n,s);let d=e;const{use:g}=f,p=(g||[]).concat(bt);for(let c=p.length;c--;)d=p[c](d);return d(u,a||f.fetcher||null,f)},Et=(e,r,t)=>{const n=r[e]||(r[e]=[]);return n.push(t),()=>{const u=n.indexOf(t);u>=0&&(n[u]=n[n.length-1],n.pop())}},Rt=(e,r)=>(...t)=>{const[n,u,a]=xr(t),s=(a.use||[]).concat(r);return e(n,u,{...a,use:s})};At();const _e=Le.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}}),Re={dedupe:!0},ar=Promise.resolve(V),wt=(e,r,t)=>{const{cache:n,compare:u,suspense:a,fallbackData:s,revalidateOnMount:f,revalidateIfStale:d,refreshInterval:g,refreshWhenHidden:p,refreshWhenOffline:c,keepPreviousData:b,strictServerPrefetchWarning:h}=t,[y,v,w,P]=G.get(n),[m,Q]=Fe(e),Y=M.useRef(!1),I=M.useRef(!1),i=M.useRef(m),o=M.useRef(r),x=M.useRef(t),l=()=>x.current,R=()=>l().isVisible()&&l().isOnline(),[T,L,A,O]=fr(n,m),S=M.useRef({}).current,U=E(s)?E(t.fallback)?V:t.fallback[m]:s,K=(_,C)=>{for(const N in S){const D=N;if(D==="data"){if(!u(_[D],C[D])&&(!E(_[D])||!u(ue,C[D])))return!1}else if(C[D]!==_[D])return!1}return!0},F=M.useMemo(()=>{const _=!m||!r?!1:E(f)?l().isPaused()||a?!1:d!==!1:f,C=j=>{const z=X(j);return delete z._k,_?{isValidating:!0,isLoading:!0,...z}:z},N=T(),D=O(),W=C(N),se=N===D?W:C(D);let k=W;return[()=>{const j=C(T());return K(j,k)?(k.data=j.data,k.isLoading=j.isLoading,k.isValidating=j.isValidating,k.error=j.error,k):(k=j,j)},()=>se]},[n,m]),q=tr.useSyncExternalStore(M.useCallback(_=>A(m,(C,N)=>{K(N,C)||_()}),[n,m]),F[0],F[1]),$e=!Y.current,br=y[m]&&y[m].length>0,ne=q.data,ee=E(ne)?U&&mr(U)?_e(U):U:ne,ce=q.error,Ae=M.useRef(ee),ue=b?E(ne)?E(Ae.current)?ee:Ae.current:ne:ee,re=m&&E(ee),hr=!ie&&tr.useSyncExternalStore(()=>J,()=>!1,()=>!0);h&&hr&&!a&&re&&console.warn(`Missing pre-initiated data for serialized key "${m}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);const Ue=br&&!E(ce)?!1:$e&&!E(f)?f:l().isPaused()?!1:a?E(ee)?!1:d:E(ee)||d,We=!!(m&&r&&$e&&Ue),Er=E(q.isValidating)?We:q.isValidating,wr=E(q.isLoading)?We:q.isLoading,oe=M.useCallback(async _=>{const C=o.current;if(!m||!C||I.current||l().isPaused())return!1;let N,D,W=!0;const se=_||{},k=!w[m]||!se.dedupe,j=()=>sr?!I.current&&m===i.current&&Y.current:m===i.current,z={isValidating:!1,isLoading:!1},Be=()=>{L(z)},ze=()=>{const $=w[m];$&&$[1]===D&&delete w[m]},He={isValidating:!0};E(T().data)&&(He.isLoading=!0);try{if(k&&(L(He),t.loadingTimeout&&E(T().data)&&setTimeout(()=>{W&&j()&&l().onLoadingSlow(m,t)},t.loadingTimeout),w[m]=[C(Q),Me()]),[N,D]=w[m],N=await N,k&&setTimeout(ze,t.dedupingInterval),!w[m]||w[m][1]!==D)return k&&j()&&l().onDiscarded(m),!1;z.error=V;const $=v[m];if(!E($)&&(D<=$[0]||D<=$[1]||$[1]===0))return Be(),k&&j()&&l().onDiscarded(m),!1;const H=T().data;z.data=u(H,N)?H:N,k&&j()&&l().onSuccess(N,m,t)}catch($){ze();const H=l(),{shouldRetryOnError:pe}=H;H.isPaused()||(z.error=$,k&&j()&&(H.onError($,m,H),(pe===!0||B(pe)&&pe($))&&(!l().revalidateOnFocus||!l().revalidateOnReconnect||R())&&H.onErrorRetry($,m,H,yr=>{const xe=y[m];xe&&xe[0]&&xe[0](nr,yr)},{retryCount:(se.retryCount||0)+1,dedupe:!0})))}return W=!1,Be(),!0},[m,n]),qe=M.useCallback((..._)=>dr(n,i.current,..._),[]);if(ye(()=>{o.current=r,x.current=t,E(ne)||(Ae.current=ne)}),ye(()=>{if(!m)return;const _=oe.bind(V,Re);let C=0;l().revalidateOnFocus&&(C=Date.now()+l().focusThrottleInterval);const D=Et(m,y,(W,se={})=>{if(W==cr){const k=Date.now();l().revalidateOnFocus&&k>C&&R()&&(C=k+l().focusThrottleInterval,_())}else if(W==ur)l().revalidateOnReconnect&&R()&&_();else{if(W==gr)return oe();if(W==nr)return oe(se)}});return I.current=!1,i.current=m,Y.current=!0,L({_k:Q}),Ue&&(w[m]||(E(ee)||ie?_():tt(_))),()=>{I.current=!0,D()}},[m]),ye(()=>{let _;function C(){const D=B(g)?g(T().data):g;D&&_!==-1&&(_=setTimeout(N,D))}function N(){!T().error&&(p||l().isVisible())&&(c||l().isOnline())?oe(Re).then(C):C()}return C(),()=>{_&&(clearTimeout(_),_=-1)}},[g,p,c,m]),M.useDebugValue(ue),a){if(!sr&&ie&&re)throw new Error("Fallback data is required when using Suspense in SSR.");re&&(o.current=r,x.current=t,I.current=!1);const _=P[m],C=!E(_)&&re?qe(_):ar;if(_e(C),!E(ce)&&re)throw ce;const N=re?oe(Re):ar;!E(ue)&&re&&(N.status="fulfilled",N.value=!0),_e(N)}return{mutate:qe,get data(){return S.data=!0,ue},get error(){return S.error=!0,ce},get isValidating(){return S.isValidating=!0,Er},get isLoading(){return S.isLoading=!0,wr}}},Tt=ht(wt);export{Tr as F,sr as I,V as U,St as a,pt as b,ye as c,_t as d,Me as g,X as m,Fe as s,Tt as u,Rt as w};
